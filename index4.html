<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>משחק הכנה לראיון - תהליכי Priority</title>
    <style>
        /* General Body Styles */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #f0f2f5;
            color: #1c1e21;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Main Game Container */
        #game-container {
            background-color: #ffffff;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            width: 100%;
            max-width: 800px;
            padding: 35px 40px;
            text-align: center;
            border: 1px solid #dddfe2;
            overflow: hidden;
            transition: all 0.3s ease;
            position: relative; /* נוסף לצורך מיקום אלמנטים פנימיים */
        }

        /* Headers */
        h1 {
            color: #0d1117;
            margin-bottom: 10px;
            font-size: 2rem;
        }

        h2#category-title {
            font-size: 1.3rem;
            color: #0969da;
            margin-bottom: 25px;
            font-weight: 600;
            background-color: #ddf4ff;
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
        }
        
        /* Question Area */
        #question-area {
            min-height: 90px;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
        }

        #question-text {
            font-size: 1.5rem;
            color: #333;
            line-height: 1.6;
            margin: 0;
            font-weight: 500;
        }
        
        /* Answers Container */
        #answers-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .answer-btn {
            background-color: #fff;
            color: #0969da;
            border: 2px solid #0969da;
            padding: 15px;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            width: 100%;
            height: 100%; /* Ensure buttons have same height */
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 60px;
        }
        
        .answer-btn:not(:disabled):hover {
            background-color: #ddf4ff;
            transform: translateY(-2px);
        }

        .answer-btn.correct {
            background-color: #28a745;
            border-color: #28a745;
            color: white;
        }

        .answer-btn.incorrect {
            background-color: #dc3545;
            border-color: #dc3545;
            color: white;
        }

        .answer-btn:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }
        
        /* Feedback Area */
        #feedback-area {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            font-size: 1rem;
            display: none; /* Hidden by default */
            border: 1px solid;
            text-align: right;
        }
        
        #feedback-area.correct-feedback {
            background-color: #e9f7ec;
            border-color: #28a745;
            color: #155724;
        }
        
        #feedback-area.incorrect-feedback {
             background-color: #f8d7da;
             border-color: #dc3545;
             color: #721c24;
        }
        
        #feedback-area strong {
            font-weight: 700;
        }

        /* Next/Restart Buttons */
        .btn {
            background: linear-gradient(135deg, #0969da, #0366d6);
            color: white;
            border: none;
            padding: 15px 35px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(9, 105, 218, 0.2);
            display: inline-block;
            margin-top: 20px;
        }

        #next-button {
            display: none; /* Hidden until an answer is selected */
        }

        /* Progress Bar */
        #progress-container {
            width: 100%;
            background-color: #e9ecef;
            border-radius: 10px;
            margin-top: 35px;
            overflow: hidden;
        }

        #progress-bar {
            width: 0%;
            height: 12px;
            background: linear-gradient(90deg, #1aaa55, #24b47e);
            border-radius: 10px;
            transition: width 0.5s cubic-bezier(0.25, 1, 0.5, 1);
        }

        #progress-text {
            margin-top: 10px;
            font-size: 1rem;
            color: #6c757d;
            font-weight: 500;
        }

        /* Screens Management */
        .screen {
            display: none;
        }
        #start-screen {
            display: block;
        }
    </style>
</head>
<body>

    <div id="game-container">
        <!-- Start Screen -->
        <div id="start-screen" class="screen">
            <h1>🚀 משחק הכנה לראיון (תהליכי Priority)</h1>
            <p style="margin-bottom: 30px; font-size: 1.1rem; color: #495057;">
               השאלות הבאות בוחנות הבנה עמוקה של תהליכי העבודה במערכת. בהצלחה!
            </p>
            <button id="start-button" class="btn">התחל במשחק</button>
            <button id="reset-button" class="btn" style="display: none; background-color: #6c757d; margin-top: 10px;">התחל מחדש</button>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="screen">
            <button id="quiz-reset-button" class="btn" style="position: absolute; top: 30px; left: 30px; background: #6c757d; padding: 8px 18px; font-size: 0.9rem; box-shadow: none; z-index: 10;">התחל מחדש</button>
            <h2 id="category-title"></h2>
            <div id="question-area">
                <p id="question-text"></p>
            </div>
            <div id="answers-container"></div>
            <div id="feedback-area"></div>
            <button id="next-button" class="btn">השאלה הבאה &larr;</button>
            <div id="progress-container">
                <div id="progress-bar"></div>
            </div>
            <p id="progress-text"></p>
        </div>

        <!-- End Screen -->
        <div id="end-screen" class="screen">
            <h1>🎉 כל הכבוד! סיימת את ההכנה.</h1>
            <p style="margin-bottom: 30px; font-size: 1.1rem; color: #495057;">
                עברת על שאלות מתקדמות המדמות את רמת החשיבה הנדרשת בתפקיד.
            </p>
            <button id="restart-button" class="btn">שחק שוב</button>
        </div>
    </div>

    <script>
        const allQuestions = [
            // --- קטגוריה 1: ניהול הוצאות סחר (Trade Spend) ---
            {
                category: "ניהול הוצאות סחר (Trade Spend)",
                question: "מה המשמעות של 'זליגה' (Leakage) בהקשר של הוצאות סחר?",
                answers: [
                    { text: "סחורה שנפלה מהמשאית.", isCorrect: false },
                    { text: "הוצאות סחר לא מבוקרות או לא מתועדות שמביאות להפסד כספי.", isCorrect: true },
                    { text: "עובדים שלוקחים סחורה הביתה.", isCorrect: false },
                    { text: "הנחות שהלקוח לא העביר לצרכן.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> 'זליגה' היא מונח מקצועי להפסד כספי הנובע מניהול לקוי של הוצאות סחר, כמו אישור חיובים כפולים, אי קבלת POP, או מבצעים שלא הניבו את התוצאה המצופה."
            },
            {
                category: "ניהול הוצאות סחר (Trade Spend)",
                question: "לקוח מבקש להפעיל מבצע שלא תוכנן בתקציב השנתי. מה תפקידך בתהליך?",
                answers: [
                    { text: "לאשר מיד כדי לרצות את הלקוח.", isCorrect: false },
                    { text: "לנתח את ההשפעה הפיננסיות ולבדוק אם יש מקור תקציבי חלופי.", isCorrect: true },
                    { text: "לסרב מיד כי זה לא בתקציב.", isCorrect: false },
                    { text: "להפנות את הבקשה למנהל הכספים ישירות.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> תפקידך הוא להיות הגורם המקצועי שמנתח את ההשלכות. זה כולל בדיקת כדאיות, מציאת פתרונות תקציביים ותיעוד מסודר של כל חריגה מהתוכנית המקורית לאישור הגורמים הרלוונטיים."
            },
            {
                category: "ניהול הוצאות סחר (Trade Spend)",
                question: "מהו ההבדל המהותי בין 'תקציב קבוע' ל'תקציב משתנה' בהסכם סחר?",
                answers: [
                    { text: "קבוע משולם בתחילת השנה, משתנה בסופה.", isCorrect: false },
                    { text: "קבוע הוא סכום מוחלט (Lump Sum), משתנה הוא אחוז מהמכירות.", isCorrect: true },
                    { text: "קבוע הוא לפרסום, משתנה הוא להנחות.", isCorrect: false },
                    { text: "אין הבדל מהותי, רק השם שונה.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> תקציב קבוע הוא סכום שסוכם מראש (למשל, דמי מידוף). תקציב משתנה נגזר מהיקף הפעילות (למשל, 2% מהמכירות יוקצו לפרסום). ההבנה הזו קריטית לחישוב נכון של חיובים."
            },
             {
                category: "ניהול הוצאות סחר (Trade Spend)",
                question: "מהי מטרת ה-Post-Promotion Analysis?",
                answers: [
                    { text: "לוודא שהזיכוי הופק נכון.", isCorrect: false},
                    { text: "לנתח את ביצועי המבצע שהסתיים כדי להפיק לקחים למבצעים עתידיים.", isCorrect: true},
                    { text: "לשלוח דוח תודה ללקוח.", isCorrect: false},
                    { text: "לסגור את המשימה במערכת.", isCorrect: false}
                ],
                explanation: "<strong>התשובה הנכונה:</strong> זהו שלב קריטי בניהול הוצאות סחר. הניתוח בוחן את ה-ROI, השפעה על מכירות, רווחיות, קניבליזציה ועוד, כדי שהחברה תוכל להשקיע את תקציביה בצורה חכמה יותר בעתיד."
            },
            {
                category: "ניהול הוצאות סחר (Trade Spend)",
                question: "מה זה 'Lump Sum' בהסכם סחר?",
                answers: [
                    { text: "סכום התלוי במכירות", isCorrect: false },
                    { text: "סכום קבוע ומוסכם מראש לפעילות מסוימת (כמו דמי מידוף)", isCorrect: true },
                    { text: "בונוס למנהל הסחר", isCorrect: false },
                    { text: "הנחה מיוחדת לחג", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> Lump Sum הוא תשלום קבוע וחד-פעמי (או שנתי) שאינו תלוי בהיקף המכירות. זה נפוץ עבור דמי מידוף, השתתפות בפרסום וכו'."
            },
            {
                category: "ניהול הוצאות סחר (Trade Spend)",
                question: "מנהל הסחר מבקש לאשר חיוב על 'תקציב נראות'. מהי הבדיקה הקריטית ביותר לפני הפקת הזיכוי?",
                answers: [
                    { text: "לוודא שיש למנהל הסחר יחסים טובים עם הלקוח.", isCorrect: false },
                    { text: "לבדוק שהתקציב תואם להסכם והתקבלה הוכחת ביצוע (POP).", isCorrect: true },
                    { text: "לשאול את הגבייה אם ניתן לדחות את הטיפול.", isCorrect: false },
                    { text: "לאשר ולסמוך על שיקול דעתו של מנהל הסחר.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> אישור הוצאות סחר (Trade Spend) מסוג Off-Invoice חייב להיות מגובה בהתאמה לסעיף תקציבי בהסכם, וחשוב מכך - בהוכחה שהפעילות אכן בוצעה (Proof of Performance)."
            },
            // --- קטגוריה 2: ניתוח אנליטי ו-KPIs ---
            {
                category: "ניתוח אנליטי ו-KPIs",
                question: "בבדיקת חיוב על מבצע הנחות ב-Power BI, איזה נתון עליך לחפש כדי לאמת את החיוב?",
                answers: [
                    { text: "נתוני Sell-In: כמה סחורה מכרנו לרשת.", isCorrect: false },
                    { text: "נתוני Sell-Through: כמה סחורה הרשת מכרה לצרכנים.", isCorrect: true },
                    { text: "נתוני המלאי שנשארו אצל הלקוח בסוף החודש.", isCorrect: false },
                    { text: "תחזית המכירות המקורית לאותו חודש.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> חיובים על מבצעי הנחה לקונים מבוססים כמעט תמיד על נתוני המכירה מהקופות של הרשת לצרכן הסופי (Sell-Through), ולא על כמות הסחורה שהחברה סיפקה לרשת (Sell-In)."
            },
            {
                category: "ניתוח אנליטי ו-KPIs",
                question: "איזה KPI הוא החשוב ביותר למדידת אפקטיביות של מבצע הנחות?",
                answers: [
                    { text: "כמות היחידות שנמכרה (Sell-In)", isCorrect: false },
                    { text: "החזר על ההשקעה (ROI) של המבצע", isCorrect: true },
                    { text: "מספר התלונות שהתקבלו מהלקוח", isCorrect: false },
                    { text: "מהירות סגירת הזיכוי במערכת", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> ROI (Return on Investment) הוא המדד המרכזי. הוא בוחן כמה רווח נוסף נוצר כתוצאה מההשקעה במבצע, מעבר למכירות הרגילות שהיו מתרחשות ממילא."
            },
            {
                category: "ניתוח אנליטי ו-KPIs",
                question: "בדוח PBI אתה רואה שמבצע מסוים הניב עלייה גדולה במכירות, אך ירידה ברווחיות. מה זה יכול להצביע?",
                answers: [
                    { text: "שהמבצע היה הצלחה מסחררת.", isCorrect: false },
                    { text: "שההנחה שניתנה הייתה עמוקה מדי ו'אכלה' את כל הרווח.", isCorrect: true },
                    { text: "שיש טעות בנתונים ב-PBI.", isCorrect: false },
                    { text: "שהלקוחות לא אהבו את המוצר.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> עלייה במחזור המכירות אינה המדד היחיד להצלחה. ניתוח נכון כולל בחינה של ההשפעה על הרווחיות. מבצע יכול להגדיל מכירות אך לגרום להפסד אם ההנחה גבוהה מדי."
            },
            {
                category: "ניתוח אנליטי ו-KPIs",
                question: "מהי 'קניבליזציה' בהקשר של ניתוח מבצעים?",
                answers: [
                    { text: "לקוחות שעוברים למתחרים.", isCorrect: false },
                    { text: "מצב שבו מבצע על מוצר א' פוגע במכירות של מוצר ב' של אותה חברה.", isCorrect: true },
                    { text: "טעות בחישוב המלאי.", isCorrect: false },
                    { text: "מבצע שהמתחרים מעתיקים.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> ניתוח מבצעים מתקדם בוחן לא רק את העלייה במכירות המוצר שבמבצע, אלא גם את ההשפעה שלו על שאר המוצרים. ייתכן שהמבצע גרם ללקוחות פשוט להחליף מוצר יקר במוצר זול יותר, והרווח הכללי של החברה נפגע."
            },
            {
                category: "ניתוח אנליטי ו-KPIs",
                question: "איך 'אפקט ההצטיידות' (Pantry Loading) יכול להטעות בניתוח הצלחת מבצע?",
                answers: [
                    { text: "הוא לא יכול להטעות.", isCorrect: false },
                    { text: "הוא גורם ללקוחות לקנות מהמתחרים אחרי המבצע.", isCorrect: false },
                    { text: "הוא גורם לעלייה חדה במכירות בזמן המבצע, אך לירידה חדה לאחריו כי הלקוחות 'אגרו' סחורה.", isCorrect: true },
                    { text: "הוא גורם למחסור בסחורה.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> ניתוח נכון של מבצע צריך להסתכל על תקופה רחבה יותר, לפני ואחרי. 'אפקט ההצטיידות' מראה שהמבצע אולי לא הגדיל את סך המכירות לאורך זמן, אלא רק הקדים אותן."
            },
            {
                category: "ניתוח אנליטי ו-KPIs",
                question: "מהי טכניקת 'Drill-Down' ב-Power BI?",
                answers: [
                    { text: "הגדלת הגרף על כל המסך.", isCorrect: false },
                    { text: "ירידה לרזולוציות נמוכות יותר של הנתונים (מרמה ארצית לרמת סניף).", isCorrect: true },
                    { text: "ייצוא הנתונים לאקסל.", isCorrect: false },
                    { text: "שליחת הדוח למנהל הסחר.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> Drill-Down היא יכולת מרכזית בכלי BI. היא מאפשרת למשתמש 'לצלול' לעומק הנתונים ולחקור אותם ברמות פירוט שונות כדי לאתר את שורש הבעיה."
            },
             // --- קטגוריה 3: ניהול ניכויים מתקדם ---
            {
                category: "ניהול ניכויים מתקדם",
                question: "זיהית חיוב כפול מלקוח על אותו מבצע. מהי הפעולה המקצועית הנכונה ביותר?",
                answers: [
                    { text: "לאשר רק אחד מהם ולקוות שהלקוח לא ישים לב.", isCorrect: false },
                    { text: "לסווג את השני כ'ניכוי לא תקף' (Invalid Deduction) ולפעול להחזר כספי.", isCorrect: true },
                    { text: "להתקשר לקניין ולהתלונן על הטעות.", isCorrect: false },
                    { text: "לאשר את שני החיובים כדי לא לפגוע ביחסים עם הלקוח.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> התהליך המקצועי הוא לא רק לדחות את החיוב, אלא לנהל אותו באופן אקטיבי כ'ניכוי לא תקף'. זה כולל תיעוד, דחייה רשמית, ותקשורת עם הגבייה כדי להבטיח שהכסף יוחזר לחברה."
            },
            {
                category: "ניהול ניכויים מתקדם",
                question: "מהו 'דוח גיול' (Aging Report) בהקשר של ניהול חיובים?",
                answers: [
                    { text: "דוח שמציג את גילאי העובדים במחלקה.", isCorrect: false },
                    { text: "דוח הממיין חיובים/ניכויים פתוחים לפי משך הזמן שהם ממתינים לטיפול.", isCorrect: true },
                    { text: "דוח שמציג את כל המבצעים שהיו החודש.", isCorrect: false },
                    { text: "דוח שמדרג את הלקוחות לפי ותק.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> דוח הגיול הוא כלי עבודה קריטי מול מחלקת הגבייה. הוא מסייע לתעדף את הטיפול בחיובים ישנים שמעכבים סגירת חשבונות ועלולים להצביע על בעיות עומק בתהליך."
            },
            {
                category: "ניהול ניכויים מתקדם",
                question: "מהו תהליך 'Chargeback' בהקשר של ניכויים?",
                answers: [
                    { text: "חיוב חוזר של הלקוח לאחר שדחית לו ניכוי.", isCorrect: false },
                    { text: "התהליך שבו החברה שלך 'מחייבת בחזרה' את הלקוח על ניכוי לא תקף שביצע.", isCorrect: true },
                    { text: "זיכוי שהונפק בטעות.", isCorrect: false },
                    { text: "חיוב עבור החזרת סחורה.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> Chargeback הוא הכלי הפורמלי לדרוש חזרה כסף על ניכוי לא מוצדק שהלקוח כבר קיזז. זהו שלב קריטי בתהליך ניהול הניכויים."
            },
            {
                category: "ניהול ניכויים מתקדם",
                question: "לקוח ניכה חיוב בטענה שהסחורה הגיעה פגומה. לאיזו מחלקה תפנה כדי לאמת את הטענה?",
                answers: [
                    { text: "לשיווק.", isCorrect: false},
                    { text: "למערך הלוגיסטיקה והבטחת איכות.", isCorrect: true},
                    { text: "למשאבי אנוש.", isCorrect: false},
                    { text: "למנהל הסחר בלבד.", isCorrect: false}
                ],
                explanation: "<strong>התשובה הנכונה:</strong> ניכויים יכולים לנבוע ממגוון סיבות. במקרה זה, האחריות היא לחקור את הנושא מול הגורמים הרלוונטיים בשרשרת האספקה (לוגיסטיקה, מחסן, איכות) כדי לוודא אם התלונה מוצדקת לפני אישור הניכוי."
            },
             {
                category: "ניהול ניכויים מתקדם",
                question: "קיבלת חיוב מהלקוח ללא כל פירוט או אסמכתא. מה הפעולה הראשונה שיש לעשות?",
                answers: [
                    { text: "לאשר אותו כדי להימנע מעיכובים.", isCorrect: false },
                    { text: "לדחות אותו מיידית על בסיס 'חוסר בתיעוד מספק'.", isCorrect: true },
                    { text: "לנסות לנחש על מה החיוב.", isCorrect: false },
                    { text: "להתקשר למחסן לשאול אם הם יודעים משהו.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> הנטל להוכיח את תקינות החיוב הוא על הלקוח. אין לאשר חיוב ללא תיעוד ברור. יש לדחות אותו באופן פורמלי ולבקש מהלקוח לשלוח אותו מחדש עם כל האסמכתאות הנדרשות."
            },
            {
                category: "ניהול ניכויים מתקדם",
                question: "לקוח גדול נוהג לקזז חיובים באופן חד-צדדי מהתשלומים שלו. כיצד יש לנהל מצב כזה?",
                answers: [
                    { text: "לקבל את הקיזוז כי זה לקוח גדול.", isCorrect: false },
                    { text: "לנהל מעקב צמוד אחר הקיזוזים, לדרוש אסמכתאות בדיעבד, ולטפל בכל קיזוז כניכוי.", isCorrect: true },
                    { text: "להפסיק לספק לו סחורה.", isCorrect: false },
                    { text: "להתעלם מהקיזוזים ולחכות שיצטברו.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> זוהי פרקטיקה נפוצה אצל קמעונאים גדולים. התפקיד הוא לא למנוע אותה, אלא לנהל אותה באופן פרואקטיבי. יש לעקוב אחר כל קיזוז, לדרוש גיבוי, ולדחות ניכויים לא מוצדקים."
            },

            // --- קטגוריה 4: תהליכים פיננסיים ---
            {
                category: "תהליכים פיננסיים",
                question: "מדוע מחלקת הכספים מבצעת 'הפרשות' (Accruals) עבור פעילויות סחר עוד לפני קבלת החיוב מהלקוח?",
                answers: [
                    { text: "כדי לשלם ללקוח מראש על המבצע.", isCorrect: false },
                    { text: "כדי לשקף את ההוצאה הצפויה בדוחות הכספיים של אותה תקופה.", isCorrect: true },
                    { text: "זו דרישה משפטית של רשות המיסים.", isCorrect: false },
                    { text: "כדי להזכיר למחלקת הסחר שהם צריכים לאסוף את החיוב.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> עיקרון ההכרה בהוצאה בחשבונאות קובע שיש לרשום הוצאה בתקופה שבה היא נוצרה. ההפרשה (Accrual) מבטיחה שהדוחות הכספיים ישקפו את כל ההתחייבויות של החברה באופן מדויק."
            },
            {
                category: "תהליכים פיננסיים",
                question: "מהי ההשפעה של הפקת זיכוי על דוח רווח והפסד (P&L) של החברה?",
                answers: [
                    { text: "אין השפעה.", isCorrect: false },
                    { text: "הזיכוי נרשם כהוצאת מכירה ומקטין את ההכנסה נטו.", isCorrect: true },
                    { text: "הזיכוי מגדיל את המלאי.", isCorrect: false },
                    { text: "הזיכוי מגדיל את תזרים המזומנים.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> זיכויים המייצגים הוצאות סחר נרשמים בדוח רווח והפסד כהוצאה או כהקטנת הכנסה, ובכך משפיעים ישירות על שורת הרווח של החברה."
            },
            {
                category: "תהליכים פיננסיים",
                question: "כיצד עבודה מדויקת שלך יכולה להשפיע על תזרים המזומנים (Cash Flow) של החברה?",
                answers: [
                    { text: "היא לא משפיעה ישירות.", isCorrect: false },
                    { text: "טיפול מהיר בניכויים ודחיית חיובים שגויים מזרזים את קבלת התשלום המלא מהלקוח.", isCorrect: true },
                    { text: "רק הפקת חשבוניות משפיעה על תזרים מזומנים.", isCorrect: false },
                    { text: "על ידי שליחת תזכורות תשלום ללקוחות.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> כל ניכוי פתוח הוא כסף 'תקוע'. פתרון מהיר של ניכויים, במיוחד דחייה של ניכויים לא תקפים, משחרר את הכסף הזה ומאפשר גבייה מהירה יותר, מה שמשפר את תזרים המזומנים."
            },
            {
                category: "תהליכים פיננסיים",
                question: "מהו ההבדל בין 'רווח גולמי' ל'רווח תפעולי' וכיצד הוצאות סחר משפיעות עליהם?",
                answers: [
                    { text: "אין הבדל.", isCorrect: false},
                    { text: "הוצאות סחר מקטינות את הרווח הגולמי (כחלק מההכנסות) או את הרווח התפעולי (כהוצאת מכירה).", isCorrect: true},
                    { text: "הוצאות סחר משפיעות רק על תזרים המזומנים.", isCorrect: false},
                    { text: "רווח גולמי הוא לפני מס, תפעולי הוא אחרי מס.", isCorrect: false}
                ],
                explanation: "<strong>התשובה הנכונה:</strong> הבנה של מבנה דוח רווח והפסד היא יתרון. הוצאות סחר הן הוצאות מכירה ושיווק, ולכן הן מקטינות את הרווח התפעולי."
            },
            {
                category: "תהליכים פיננסיים",
                question: "מהי המשמעות של תנאי תשלום 'שוטף + 30'?",
                answers: [
                    { text: "יש לשלם תוך 30 יום מתאריך ההזמנה.", isCorrect: false },
                    { text: "התשלום יתבצע 30 יום לאחר סוף החודש שבו הונפקה החשבונית.", isCorrect: true },
                    { text: "ניתן לשלם ב-30 תשלומים.", isCorrect: false },
                    { text: "מקבלים 30% הנחה על תשלום מיידי.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> הבנת תנאי תשלום (או 'תנאי אשראי') היא בסיסית בעבודה מול לקוחות. 'שוטף' משמעו סוף החודש הנוכחי."
            },
            {
                category: "תהליכים פיננסיים",
                question: "כיצד תפקידך תורם לתהליך סגירת סוף חודש/רבעון של מחלקת הכספים?",
                answers: [
                    { text: "התפקיד לא קשור לסגירות חודש.", isCorrect: false },
                    { text: "על ידי טיפול מהיר בכל החיובים והפקת הזיכויים הרלוונטיים לאותה תקופה.", isCorrect: true },
                    { text: "על ידי יציאה לחופשה בזמן סגירת חודש.", isCorrect: false },
                    { text: "על ידי הכנת דוחות מכירה למנהלים.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> כדי שמחלקת הכספים תוכל 'לסגור' את הדוחות, כל ההוצאות וההכנסות של התקופה צריכות להיות רשומות. טיפול מהיר ומדויק בחיובים וזיכויים הוא קריטי."
            },
            
            // --- קטגוריה 5: תהליכי עבודה במערכת Priority ---
            {
                category: "תהליכי עבודה במערכת Priority",
                question: "מהי הפעולה הראשונה שעליך לבצע במערכת Priority כדי להתחיל בהגדרה של מבצע חודשי חדש?",
                answers: [
                    { text: "להיכנס למסך 'קישור מחירון ללקוח'.", isCorrect: false },
                    { text: "לפתוח 'מחירון' חדש ולהגדיר לו קוד, תיאור ותוקף.", isCorrect: true },
                    { text: "להפיק זיכוי עתידי.", isCorrect: false },
                    { text: "להגדיר 'הנחה למוצר' בכרטיס הלקוח.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> הכל מתחיל מיצירת 'המיכל' למבצע. השלב הראשון הוא תמיד פתיחת 'מחירון' חדש, שיהווה את הבסיס לכל הגדרות המבצע הספציפיות בהמשך."
            },
            {
                category: "תהליכי עבודה במערכת Priority",
                question: "הגדרת מבצע במסך 'מחירי מוצרים', אך הלקוח לא מקבל את ההנחה. מהי הפעולה הקריטית שסביר להניח ששכחת?",
                answers: [
                    { text: "לעדכן את המק'ט של המוצר.", isCorrect: false },
                    { text: "לבצע 'קישור מחירון ללקוח' כדי להפעיל את המבצע.", isCorrect: true },
                    { text: "לבדוק את תאריך התוקף של המחירון.", isCorrect: false },
                    { text: "לשלוח ללקוח מכתב על המבצע.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> הגדרת המחירון והמחירים היא רק חצי מהעבודה. כדי 'להפעיל' את המבצע עבור לקוח ספציפי, חובה לקשר את המחירון אליו במסך 'קישור מחירון ללקוח'. ללא פעולה זו, המערכת לא תדע להחיל את ההנחה."
            },
            {
                category: "תהליכי עבודה במערכת Priority",
                question: "מנהל הסחר מבקש לתת הנחה של 15% ללקוח ספציפי על כל משפחת מוצרי החלב. באיזה מסך הכי נכון להגדיר זאת?",
                answers: [
                    { text: "במסך 'מחירי מוצרים' הכללי.", isCorrect: false },
                    { text: "במסך 'הנחה למוצר' המקושר לכרטיס הלקוח.", isCorrect: true },
                    { text: "במסך 'הפקת זיכויים'.", isCorrect: false },
                    { text: "במסך 'מחירונים'.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> מסך 'הנחה למוצר' נועד בדיוק למצבים כאלה - מתן הנחה באחוזים ללקוח ספציפי על קבוצת מוצרים, והוא גובר על מחירונים כלליים."
            },
            {
                category: "תהליכי עבודה במערכת Priority",
                question: "לאחר שאישרת ניכוי של לקוח עקב טעות בחיוב, מהי הפעולה הסופית שתבצע ב-Priority?",
                answers: [
                    { text: "למחוק את החשבונית המקורית.", isCorrect: false },
                    { text: "להיכנס למסך 'הפקת חשבוניות/זיכויים' ולהפיק תעודת זיכוי.", isCorrect: true },
                    { text: "לשלוח מייל לגבייה שיטפלו בזה.", isCorrect: false },
                    { text: "לעדכן את המחירון של הלקוח.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> הפעולה החשבונאית הפורמלית שסוגרת את הטיפול היא הפקת מסמך רשמי - תעודת זיכוי. פעולה זו מתקנת את הרישומים הכספיים ומאזנת את כרטיס הלקוח."
            },
            {
                category: "תהליכי עבודה במערכת Priority",
                question: "מה ההבדל המהותי בין הגדרה ב'מחירי מוצרים' לבין הגדרה ב'הנחה למוצר'?",
                answers: [
                    { text: "אין הבדל, התוצאה זהה.", isCorrect: false },
                    { text: "'מחירי מוצרים' קובע מחיר סופי ליחידה, 'הנחה למוצר' מחיל הנחה באחוזים.", isCorrect: true },
                    { text: "'מחירי מוצרים' הוא ללקוחות גדולים, 'הנחה למוצר' לקטנים.", isCorrect: false },
                    { text: "רק 'מחירי מוצרים' דורש תאריך תוקף.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> זו הבחנה חשובה. 'מחירי מוצרים' משמש להגדרת מחיר מבצע ספציפי (למשל, 10 ש'ח ליחידה), בעוד ש'הנחה למוצר' משמש להחלת הנחה גורפת באחוזים."
            },
            {
                category: "תהליכי עבודה במערכת Priority",
                question: "איך עדכון מבצע בפריוריטי עלול להשפיע על מחלקת תכנון המלאי?",
                answers: [
                    { text: "הוא לא משפיע.", isCorrect: false },
                    { text: "מבצע אטרקטיבי עלול לייצר ביקושים גבוהים מהצפוי ולדרוש היערכות מלאי מוקדמת.", isCorrect: true },
                    { text: "הוא משפיע רק על מחלקת כספים.", isCorrect: false },
                    { text: "הוא מקטין את הצורך במלאי.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> מערכת ERP היא אינטגרטיבית. מבצע אגרסיבי יכול לייצר ביקושים גבוהים, מה שמשפיע על תכנון הייצור, רמות המלאי והלוגיסטיקה. ראייה מערכתית רחבה היא מיומנות חשובה."
            },
            {
                category: "תהליכי עבודה במערכת Priority",
                question: "אתה צריך להגדיר מבצע מורכב. מהי דרך הפעולה הבטוחה ביותר?",
                answers: [
                    { text: "להגדיר אותו במהירות ולסמוך על המערכת.", isCorrect: false},
                    { text: "להגדיר בסביבת טסט, לבצע בדיקות, ורק אז להגדיר בסביבת הייצור.", isCorrect: true},
                    { text: "לבקש ממפתח תוכנה שיגדיר אותו.", isCorrect: false},
                    { text: "לשלוח מייל לכל החברה כדי שיידעו להיזהר.", isCorrect: false}
                ],
                explanation: "<strong>התשובה הנכונה:</strong> עבודה זהירה ומבוקרת היא המפתח למניעת טעויות יקרות. שימוש בסביבת בדיקות (Test Environment) הוא הפרקטיקה המקצועית הנכונה ביותר להגדרות מורכבות."
            },
            
            // --- קטגוריה 6: תרחישים וקבלת החלטות ---
            {
                category: "תרחישים וקבלת החלטות",
                question: "גילית טעות משמעותית בחישוב זיכוי שכבר הופק ואושר. מה הצעד הראשון שתעשה?",
                answers: [
                    { text: "לקוות שאף אחד לא ישים לב.", isCorrect: false },
                    { text: "ליידע באופן מיידי את המנהל/ת שלך ואת מחלקת הכספים כדי לתקן את הטעות.", isCorrect: true },
                    { text: "לנסות לתקן את זה בזיכוי הבא של אותו לקוח.", isCorrect: false },
                    { text: "למחוק את הזיכוי מהמערכת.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> שקיפות ולקיחת אחריות הן קריטיות. הגישה המקצועית היא לדווח מיד, להבין את ההשלכות ולפעול לתיקון. ניסיון להסתיר את הטעות עלול לגרום נזק גדול יותר."
            },
            {
                category: "תרחישים וקבלת החלטות",
                question: "את/ה נמצא/ת תחת לחץ לסגור חיובים רבים לפני סוף החודש. כיצד תתעדף/י את המשימות?",
                answers: [
                    { text: "לטפל קודם בחיובים הקטנים ביותר.", isCorrect: false },
                    { text: "לתעדף לפי גובה הסכום, דחיפות הבקשה מהגבייה, ומורכבות הבדיקה.", isCorrect: true },
                    { text: "לעבוד לפי סדר ההגעה של המיילים.", isCorrect: false },
                    { text: "לבקש ממנהל/ת לדחות את הדד-ליין.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> ניהול זמן ותעדוף הם מיומנויות מפתח. התשובה מראה על חשיבה רב-ממדית שמתחשבת בהשפעה הכספית, בדחיפות התפעולית ובמשאבים הנדרשים."
            },
            {
                category: "תרחישים וקבלת החלטות",
                question: "מנהל הסחר ומנהלת הגבייה חלוקים בדעתם לגבי פרשנות סעיף בהסכם. מה תפקידך?",
                answers: [
                    { text: "לבחור צד.", isCorrect: false },
                    { text: "לשמש כגורם המגשר: להציג את הנתונים, את הפרשנות האובייקטיבית, ואת ההשלכות.", isCorrect: true },
                    { text: "להימנע מלהתערב.", isCorrect: false },
                    { text: "להפנות את הבעיה למנכ'ל.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> בתפקידך את/ה הגורם האובייקטיבי שמחזיק בנתונים. התפקיד הוא לא להכריע, אלא לספק את כל המידע המקצועי שיאפשר למנהלים לקבל החלטה מושכלת."
            },
            {
                category: "תרחישים וקבלת החלטות",
                question: "תיארת תהליך שיפור, אך המנהל/ת לא מאשר/ת את המשאבים. מה תעשה/י?",
                answers: [
                    { text: "לוותר על הרעיון.", isCorrect: false },
                    { text: "לנסות ליישם פיילוט קטן או פתרון ביניים שדורש פחות משאבים, כדי להוכיח היתכנות.", isCorrect: true },
                    { text: "לעקוף את המנהל/ת ולפנות למנהל/ת בכיר/ה יותר.", isCorrect: false },
                    { text: "להתלונן בפני עמיתים.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> תשובה זו מראה על נחישות, יצירתיות והבנה של מגבלות ארגוניות. היכולת למצוא פתרונות חלקיים ולהתקדם בהדרגה היא סימן לבשלות מקצועית."
            },
            {
                category: "תרחישים וקבלת החלטות",
                question: "את/ה היחיד/ה שיודע/ת לבצע פעולה מורכבת ויוצא/ת לחופשה. מה תעשה/י?",
                answers: [
                    { text: "אצא לחופשה ואהיה זמין/ה בטלפון למקרה חירום.", isCorrect: false },
                    { text: "אכין מדריך מסודר (SOP), אדריך עובד/ת נוסף/ת כגיבוי, ואשאיר פרטי קשר ברורים.", isCorrect: true },
                    { text: "אבטל את החופשה.", isCorrect: false },
                    { text: "אגיד למנהל/ת שזו אחריותו למצוא פתרון.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> התשובה מראה על אחריות, חשיבה מערכתית ויכולת הדרכה. יצירת גיבוי והמשכיות עסקית היא סימן לבגרות מקצועית."
            },
            {
                category: "תרחישים וקבלת החלטות",
                question: "גילית פער בידע המקצועי שלך הנדרש למשימה חדשה. מה תעשה/י?",
                answers: [
                    { text: "להימנע מהמשימה.", isCorrect: false },
                    { text: "לפעול באופן פרואקטיבי ללמידה עצמאית, להתייעץ עם קולגות, ולבקש הדרכה במידת הצורך.", isCorrect: true },
                    { text: "לנסות להסתדר לבד ולקוות לטוב.", isCorrect: false },
                    { text: "להגיד שזה לא חלק מהתפקיד שלך.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> תשובה זו מדגימה יוזמה, לקיחת אחריות על התפתחות מקצועית ויכולת למידה, תכונות שמוערכות מאוד אצל עובדים מנוסים."
            },
            {
                category: "תרחישים וקבלת החלטות",
                question: "איך תתמודד/י עם עמית לעבודה שאינו משתף פעולה וגורם לעיכובים בעבודתך?",
                answers: [
                    { text: "לפנות ישירות למנהל שלו ולהתלונן.", isCorrect: false },
                    { text: "לנסות לדבר איתו באופן אישי, להבין את הסיבות לקושי, ולהציע פתרונות משותפים לפני הסלמת הנושא.", isCorrect: true },
                    { text: "לעשות את העבודה שלו במקומו.", isCorrect: false },
                    { text: "להפסיק לעבוד איתו.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> תשובה זו מראה על אינטליגנציה רגשית וכישורי פתרון קונפליקטים. הגישה הנכונה היא לנסות לפתור את הבעיה ברמה הבין-אישית לפני שמערבים מנהלים."
            },
            {
                category: "תרחישים וקבלת החלטות",
                question: "המנהל/ת נותן/ת לך משימה דחופה שמתנגשת עם משימה דחופה אחרת. מה תעשה/י?",
                answers: [
                    { text: "לעשות את המשימה החדשה ולהתעלם מהישנה.", isCorrect: false },
                    { text: "להציג את הקונפליקט בשקיפות ולבקש מהמנהל/ת סיוע בתעדוף.", isCorrect: true },
                    { text: "לנסות לעשות את שתיהן במקביל ולהסתכן באיכות נמוכה.", isCorrect: false },
                    { text: "להגיד שאי אפשר לבצע את המשימה החדשה.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> התשובה מראה על ניהול זמן אחראי ותקשורת פתוחה עם המנהל. תפקידך הוא להציף את הבעיה, ותפקיד המנהל הוא לעזור לקבוע את סדר העדיפויות האסטרטגי."
            }
        ];

        let currentQuestionIndex = 0;
        let shuffledQuestions = [];

        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const endScreen = document.getElementById('end-screen');
        const categoryTitle = document.getElementById('category-title');
        const questionText = document.getElementById('question-text');
        const answersContainer = document.getElementById('answers-container');
        const feedbackArea = document.getElementById('feedback-area');
        const startButton = document.getElementById('start-button');
        const resetButton = document.getElementById('reset-button');
        const nextButton = document.getElementById('next-button');
        const restartButton = document.getElementById('restart-button');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        const quizResetButton = document.getElementById('quiz-reset-button');

        // Main Event Listeners
        startButton.addEventListener('click', startGame);
        resetButton.addEventListener('click', resetGame);
        quizResetButton.addEventListener('click', resetGame);
        nextButton.addEventListener('click', nextQuestion);
        restartButton.addEventListener('click', restartGame);

        // Initialize the game state when the page loads
        document.addEventListener('DOMContentLoaded', initializeGame);
        
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function initializeGame() {
            const savedProgress = localStorage.getItem('interviewGameProgress');
            const savedQuestions = localStorage.getItem('shuffledQuestions');

            if (savedProgress !== null && savedQuestions !== null && parseInt(savedProgress, 10) < 50) {
                shuffledQuestions = JSON.parse(savedQuestions);
                currentQuestionIndex = parseInt(savedProgress, 10);
                
                startButton.textContent = `המשך משאלה ${currentQuestionIndex + 1}`;
                resetButton.style.display = 'inline-block';
            } else {
                resetButton.style.display = 'none';
                startButton.textContent = 'התחל במשחק';
            }
        }

        function startGame() {
            if (shuffledQuestions.length === 0) {
                currentQuestionIndex = 0;
                shuffledQuestions = shuffleArray([...allQuestions]).slice(0, 50);
                localStorage.setItem('shuffledQuestions', JSON.stringify(shuffledQuestions));
                localStorage.setItem('interviewGameProgress', '0');
            }
            
            startScreen.style.display = 'none';
            quizScreen.style.display = 'block';
            endScreen.style.display = 'none';
            showQuestion();
        }

        function resetGame() {
            localStorage.removeItem('interviewGameProgress');
            localStorage.removeItem('shuffledQuestions');
            shuffledQuestions = [];
            currentQuestionIndex = 0;
            
            resetButton.style.display = 'none';
            startButton.textContent = 'התחל במשחק';
            
            startGame();
        }

        function showQuestion() {
            resetState();
            if (currentQuestionIndex >= shuffledQuestions.length) {
                endGame();
                return;
            }

            const currentQuestion = shuffledQuestions[currentQuestionIndex];
            categoryTitle.textContent = currentQuestion.category;
            questionText.textContent = currentQuestion.question;
            
            const shuffledAnswers = shuffleArray([...currentQuestion.answers]);

            shuffledAnswers.forEach(answer => {
                const button = document.createElement('button');
                button.innerHTML = answer.text;
                button.classList.add('answer-btn');
                if (answer.isCorrect) {
                    button.dataset.correct = true;
                }
                button.addEventListener('click', selectAnswer);
                answersContainer.appendChild(button);
            });
            updateProgress();
        }

        function resetState() {
            while (answersContainer.firstChild) {
                answersContainer.removeChild(answersContainer.firstChild);
            }
            feedbackArea.style.display = 'none';
            feedbackArea.classList.remove('correct-feedback', 'incorrect-feedback');
            nextButton.style.display = 'none';
        }

        function selectAnswer(e) {
            const selectedButton = e.currentTarget;
            const isCorrect = selectedButton.dataset.correct === 'true';

            feedbackArea.style.display = 'block';
            const explanation = shuffledQuestions[currentQuestionIndex].explanation;
            
            if (isCorrect) {
                selectedButton.classList.add('correct');
                feedbackArea.innerHTML = explanation;
                feedbackArea.classList.add('correct-feedback');
            } else {
                selectedButton.classList.add('incorrect');
                feedbackArea.innerHTML = explanation;
                feedbackArea.classList.add('incorrect-feedback');
                Array.from(answersContainer.children).forEach(button => {
                    if (button.dataset.correct === 'true') {
                        button.classList.add('correct');
                    }
                });
            }

            Array.from(answersContainer.children).forEach(button => {
                button.disabled = true;
            });

            nextButton.style.display = 'inline-block';
        }

        function nextQuestion() {
            currentQuestionIndex++;
            localStorage.setItem('interviewGameProgress', currentQuestionIndex.toString());
            showQuestion();
        }

        function updateProgress() {
            const totalQuestions = shuffledQuestions.length;
            const progressPercentage = ((currentQuestionIndex + 1) / totalQuestions) * 100;
            progressBar.style.width = `${progressPercentage}%`;
            progressText.textContent = `שאלה ${currentQuestionIndex + 1} מתוך ${totalQuestions}`;
        }

        function endGame() {
            quizScreen.style.display = 'none';
            endScreen.style.display = 'block';
            localStorage.removeItem('interviewGameProgress');
            localStorage.removeItem('shuffledQuestions');
        }

        function restartGame() {
            shuffledQuestions = [];
            currentQuestionIndex = 0;
            
            resetButton.style.display = 'none';
            startButton.textContent = 'התחל במשחק';
            
            startGame();
        }
    </script>
</body>
</html>


