<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>住专  驻住</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Assistant', sans-serif;
        }
        .option-btn:disabled {
            cursor: not-allowed;
        }
        .option-btn {
            transition: all 0.2s ease-in-out;
        }
        .option-btn.selected {
            background-color: #3b82f6; /* bg-blue-600 */
            color: white;
            border-color: #3b82f6;
        }
        .option-btn.correct {
            background-color: #16a34a !important; /* bg-green-600 */
            color: white !important;
            border-color: #16a34a !important;
            opacity: 1 !important;
        }
        .option-btn.incorrect {
            background-color: #dc2626 !important; /* bg-red-600 */
            color: white !important;
            border-color: #dc2626 !important;
            opacity: 1 !important;
        }
        .shape {
            width: 40px;
            height: 40px;
        }
        .shape-sm {
            width: 20px;
            height: 20px;
        }
        .shape.circle, .shape-sm.circle {
            border-radius: 50%;
        }
        .shape.triangle, .shape-sm.triangle {
            width: 0;
            height: 0;
            background-color: transparent !important;
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-bottom-width: 40px;
            border-bottom-style: solid;
        }
        .shape-sm.triangle {
            border-left-width: 10px;
            border-right-width: 10px;
            border-bottom-width: 20px;
        }
        .grid-3x3 {
            display: grid;
            grid-template-columns: repeat(3, 50px);
            grid-template-rows: repeat(3, 50px);
            gap: 4px;
        }
        .grid-cell {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f1f5f9;
            border: 1px solid #e2e8f0;
        }
    </style>
</head>
<body class="bg-slate-100 flex items-center justify-center min-h-screen p-4">

    <div id="app" class="w-full max-w-3xl mx-auto">
        <!-- Welcome Screen -->
        <div id="welcome-screen" class="bg-white p-8 rounded-2xl shadow-lg text-center">
            <h1 class="text-3xl font-bold text-slate-800 mb-4">住专  驻住</h1>
            <p class="text-slate-600 mb-8">
                 转 转专 转 砖砖转 住  注拽专: , 转 爪专.<br> 拽专 20 砖转.
            </p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <button data-category="verbal" class="category-btn bg-blue-500 text-white font-bold p-6 rounded-lg hover:bg-blue-600 transition-colors duration-300 shadow-md">
                    <span class="text-2xl"></span>
                    <h3 class="mt-2 text-xl font-semibold">砖 转</h3>
                    <p class="text-sm font-light mt-1">转, 拽 砖转 砖驻</p>
                </button>
                <button data-category="quantitative" class="category-btn bg-green-500 text-white font-bold p-6 rounded-lg hover:bg-green-600 transition-colors duration-300 shadow-md">
                    <span class="text-2xl">М</span>
                    <h3 class="mt-2 text-xl font-semibold">砖 转转</h3>
                    <p class="text-sm font-light mt-1">住专转 砖转 注转 转转</p>
                </button>
                <button data-category="figural" class="category-btn bg-purple-500 text-white font-bold p-6 rounded-lg hover:bg-purple-600 transition-colors duration-300 shadow-md">
                    <span class="text-2xl"></span>
                    <h3 class="mt-2 text-xl font-semibold">砖 爪专转</h3>
                    <p class="text-sm font-light mt-1">住专转 砖 爪专转 专爪转</p>
                </button>
            </div>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="hidden">
            <div class="bg-white p-6 sm:p-8 rounded-2xl shadow-lg">
                 <div class="mb-6">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-sm font-semibold text-slate-500">砖 <span id="question-number"></span> 转 <span id="total-questions"></span></span>
                        <div id="timer-container" class="flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-slate-500"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
                            <span id="timer" class="text-lg font-bold text-slate-700 w-12 text-left"></span>
                        </div>
                        <span id="quiz-category" class="text-sm font-bold"></span>
                    </div>
                    <div class="w-full bg-slate-200 rounded-full h-2.5">
                        <div id="progress-bar" class="h-2.5 rounded-full transition-all duration-500" style="width: 0%"></div>
                    </div>
                </div>
                
                <div id="question-area" class="bg-slate-50 p-6 rounded-lg mb-6 min-h-[120px] flex items-center justify-center">
                    <!-- Question content will be rendered here -->
                </div>
                
                <div id="options-area" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <!-- Options will be injected here by JS -->
                </div>

                <div id="explanation-area"></div>

                <div class="mt-8 flex justify-between items-center">
                    <button id="back-to-menu-btn" class="text-sm text-slate-500 hover:text-slate-700">专 转驻专</button>
                    <button id="next-btn" class="bg-slate-600 text-white font-bold py-2 px-8 rounded-lg hover:bg-slate-700 transition-colors duration-300 disabled:bg-slate-400 disabled:cursor-not-allowed" disabled>
                        
                    </button>
                </div>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="hidden">
             <div class="bg-white p-8 rounded-2xl shadow-lg">
                <h2 class="text-3xl font-bold text-slate-800 mb-2 text-center">住 转专</h2>
                <div class="text-center mb-6 p-4 bg-slate-50 rounded-xl">
                    <p class="text-lg text-slate-600">爪转 -</p>
                    <p id="score-display" class="text-6xl font-bold text-blue-600">0/0</p>
                    <p id="score-percentage" class="text-xl font-semibold text-slate-700"></p>
                </div>
                
                <h3 class="text-xl font-bold text-slate-800 mb-4">驻专 转砖转:</h3>
                <div id="answers-review-container" class="space-y-4 max-h-80 overflow-y-auto pr-2">
                    <!-- Review will be injected here -->
                </div>

                <div class="mt-8 flex justify-center gap-4">
                    <button id="restart-quiz-btn" class="bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors duration-300 shadow-md">
                        转专 住祝 转 砖
                    </button>
                     <button id="main-menu-btn" class="bg-slate-200 text-slate-800 font-bold py-3 px-6 rounded-lg hover:bg-slate-300 transition-colors duration-300">
                        转驻专 专砖
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const app = {
            questions: {
                verbal: [
                    { type: 'analogy', question: "转 : ", options: ["住驻 : 砖", "住 : 祝", "专转 : 拽专", "驻 : "], answer: 3, time: 25, explanation: "<strong> 砖转 砖:</strong> 专 转 住 拽  砖转  专砖转. <strong>转 砖:</strong> ''  爪注 砖爪注转  '转'. 驻砖 住  转砖转. 砖 注 住驻 ( ), 祝 驻砖专转 住 注祝 ( 转 转 砖专转), 拽专 砖 专转.   爪注 砖爪注转  驻. <strong>住拽:</strong> 住 ." },
                    { type: 'logic', question: " '专驻转 转. '专'  '专驻.  转 住拽?", options: ["'专' ", "'专' ", " 转 转  '专驻转", " 转 住拽 专"], answer: 1, time: 20, explanation: "<strong> 砖转 砖:</strong>   砖  爪. <strong>转 砖:</strong>   '  砖砖 拽爪转 '专驻转,  '. 转  ''专' 砖 拽爪转 '专驻转'. , '专'  拽 转 转转 . <strong>住拽:</strong> '专' ." },
                    { type: 'completion', question: "专转 砖 注祝,  ___ 砖 注  ___ 转 驻专拽 .", options: ["住专, 住", ", 住", "砖, 转", "专爪, 注"], answer: 1, time: 25, explanation: "<strong> 砖转 砖:</strong> 驻砖 转 拽砖专   拽 砖驻. <strong>转 砖:</strong>  '专转' 爪注 注 . 专, 专转 注驻转 (住 驻住拽),  注砖 转 驻. 拽 砖 砖 砖驻 爪 专 ('......').  砖 注  砖 转 专. <strong>住拽:</strong>  '' ( 注驻转) '住' (专)." },
                    { type: 'analogy', question: "专注 : ", options: ["爪 : 砖转", "注驻转 : 砖", "拽专 : ", " 转砖转 转"], answer: 3, time: 20, explanation: "<strong> 砖转 砖:</strong> 专 转 住. <strong>转 砖:</strong> '专注'  爪专  住, ''  驻转专 砖住驻拽 转 爪专. 拽 转 驻砖专转: 爪  住 砖砖转 驻转专转, 注驻转  住 砖砖 驻转专转, 拽专  住 砖 驻转专.  住 . <strong>住拽:</strong>  转砖转 转." },
                    { type: 'logic', question: " 专 砖, 专 专. 专 砖.  住拽 转?", options: ["专 砖", "专 砖 拽", " 专 砖", " 驻砖专 注转"], answer: 2, time: 30, explanation: "<strong> 砖转 砖:</strong>   砖 ' A  B'. <strong>转 砖:</strong>   ' 砖 (A) ->  专 (B)'. 转  '专 砖', 专 ' B'.   住 ,  转爪 (B)  转拽转,  住 (A)   转拽. <strong>住拽:</strong>  专 砖." },
                    { type: 'completion', question: " 爪驻转, 住专  ___ 祝 专 拽 拽 ___ 爪注.", options: ["专转拽, 专注", "驻转注, 砖转注", "砖注, 注", "爪拽, 转"], answer: 2, time: 25, explanation: "<strong> 砖转 砖:</strong> 砖  转 拽砖专. <strong>转 砖:</strong> ' 爪驻转' 专 砖转爪 转 砖转  转 爪驻. '祝' 专 转 专注 砖. '砖注'  转 砖转, '注'  转爪 转 拽爪转 转专 砖 砖注. <strong>住拽:</strong> 爪 '砖注' '注'  转 转专." },
                    { type: 'analogy', question: "专 : 注抓", options: ["驻 : 拽", " : 住驻专", "爪专 : 爪注", "专驻 : 转专驻"], answer: 0, time: 25, explanation: "<strong> 砖转 砖:</strong> 专 转 住 '注 拽爪注 注 注 专 '. <strong>转 砖:</strong> 专 注 注 注抓. 驻 注 注 拽 (专 ).  注 注 住驻专 (), 爪专 注 爪注 (专 转), 专驻 注 转专驻 (转爪专). <strong>住拽:</strong> 住  转专  驻 拽." },
                    { type: 'analogy', question: "住 : 住", options: ["转 : 住注", " : 专 ", "专转 : 拽专", "转 : 砖"], answer: 1, time: 25, explanation: "<strong> 砖转 砖:</strong> 专 转 住 ' 转专 驻注 砖'. <strong>转 砖:</strong> 住 驻注 住. 专  驻注 . 住注 砖转砖 转, 拽专  拽 专转, 砖  转砖转转. <strong>住拽:</strong> 住    专 ." },
                    { type: 'logic', question: " 驻专转 转拽. 转驻  驻专.    专?", options: ["砖 驻专转 爪", "转驻  转拽", " 专 转拽  驻专", "转驻  转 "], answer: 1, time: 25, explanation: "<strong> 砖转 砖:</strong>  砖 砖 . <strong>转 砖:</strong>  转驻 砖 拽爪转 '驻专转',   砖 专 拽爪  '转拽',  转驻 专 转拽. 砖专 转砖转  注转 转. <strong>住拽:</strong> 转驻  转拽." },
                    { type: 'completion', question: " ___ 砖 专转, 注 爪转 ___ 砖转祝 驻注.", options: ["砖, 转", "爪, 转", "转专, 转驻专", "转, 转"], answer: 1, time: 20, explanation: "<strong> 砖转 砖:</strong>  砖驻 砖 转 转爪. <strong>转 砖:</strong> '' 砖 转爪 转 ('爪'), 专砖 转  ('转'). 砖专 爪  . <strong>住拽:</strong> 爪 转." },
                    { type: 'analogy', question: "住驻专 : 住驻专", options: [" : 住注", "爪专 : ", "砖拽 : ", "专 : 转"], answer: 1, time: 25, explanation: "<strong> 砖转 砖:</strong> 专 转 住 '驻专 拽   爪/爪 住祝'. <strong>转 砖:</strong> 住驻专 爪 住驻专. 爪专 爪 .   拽 转驻专 住注,    住注. 砖拽 驻注 注 . <strong>住拽:</strong> 住  转专  爪专 ." },
                    { type: 'logic', question: "转: 砖 砖  砖 专住. 住  专住.  转 住拽?", options: ["住 ", "住  ", "  砖 专住  ", " 转 住拽  住 "], answer: 3, time: 35, explanation: "<strong> 砖转 砖:</strong> 砖   '砖'.   ''. <strong>转 砖:</strong> 转 专 砖砖 驻驻  拽爪转  拽爪转  专住,   砖  专住 . 住  转 拽爪转  专住 砖 . <strong>住拽:</strong>  转 住拽 专 注  砖 住." },
                    { type: 'analogy', question: "专 : 专祝", options: ["驻专 : 注砖", " : ", "爪驻专 : 砖", " : 转"], answer: 0, time: 25, explanation: "<strong> 砖转 砖:</strong> 专 转 住 '爪专  砖'. <strong>转 砖:</strong> 专祝   砖 专. 注砖   砖 驻专. , 砖 转  住转 ,  . <strong>住拽:</strong> 住   驻专 注砖." },
                    { type: 'completion', question: "专爪 专 爪专 ___  , 注 砖驻 住 转拽砖 ___ 转 专.", options: ["住转, 转专 注", "专, 转注驻 住转", "专, ", "砖拽,  砖注"], answer: 2, time: 25, explanation: "<strong> 砖转 砖:</strong> 驻砖 拽砖专 砖 住 转爪. <strong>转 砖:</strong> 爪专转 专  住, 转 住  转爪. 专 '专' 专 ''. 砖专 转  转 转 . <strong>住拽:</strong> 专 ." },
                    { type: 'analogy', question: "专 : ", options: ["砖砖 : ", " : ", "注 : 砖", "专 : 砖"], answer: 0, time: 20, explanation: "<strong> 砖转 砖:</strong> 专 转 住 '专 砖 驻 转拽驻 '. <strong>转 砖:</strong> 专  专 专 . 砖砖  专 专 . <strong>住拽:</strong> 住 ." },
                    { type: 'logic', question: "专拽 砖 爪 拽驻爪 住.  拽驻抓 住.  ?", options: ["  抓", " 爪 拽驻爪 住", " 抓", " 驻砖专 注转"], answer: 2, time: 30, explanation: "<strong> 砖转 砖:</strong>  '专拽' 专 转 专. <strong>转 砖:</strong> '专拽 爪'  爪注 转 驻注.  砖 爪注 转 驻注 (拽驻抓 住),   注 转 专.   专 砖 爪 拽驻爪. <strong>住拽:</strong>  抓." },
                    { type: 'completion', question: "住驻 转  ___ , 注 砖转 专 ___ 专.", options: ["拽, 注拽专", "砖, 转拽", "注, ", "拽爪专, 爪注"], answer: 0, time: 20, explanation: "<strong> 砖转 砖:</strong>  砖驻 砖 注爪 转爪. <strong>转 砖:</strong> 注爪  ('拽') 专转 转爪 专住转 ('注拽专'). 砖专 转  转. <strong>住拽:</strong> 拽 注拽专." },
                    { type: 'analogy', question: "专注 : 爪", options: ["爪 : 转专转", "专 : ", "注祝 : 注抓", "砖专砖 : "], answer: 0, time: 25, explanation: "<strong> 砖转 砖:</strong> 专 转 住 '拽专 砖 转驻转 爪专 '. <strong>转 砖:</strong> 专注 转驻转 爪. 爪 转驻转转 转专转. 砖专 驻砖专转  拽 砖  住 砖 拽. <strong>住拽:</strong> 住   爪 转专转." },
                    { type: 'logic', question: " 爪  ,   . 爪  .  转 住拽?", options: ["爪 ", "爪 ", "爪  ", " 转 住拽 转 砖爪 "], answer: 3, time: 35, explanation: "<strong> 砖转 砖:</strong>   砖 ' A   B'. <strong>转 砖:</strong>   '  (A) ->    ( B)'. 转  ' ' ( B). 砖转 转爪  驻砖专转 住拽 专 注 住. 爪  转 专拽, 爪,   爪注 专 砖 ,  .    注转 转 转. <strong>住拽:</strong>  转 住拽 转." },
                    { type: 'analogy', question: "专 : 注专", options: ["转拽 : 注转", "砖 : ", " : 砖", " : 注"], answer: 0, time: 25, explanation: "<strong> 砖转 砖:</strong> 专 转 住 '砖 驻砖    拽砖专'. <strong>转 砖:</strong> 专 拽砖专 注专. 转拽 拽砖专 注转. <strong>住拽:</strong> 住 ." },
                ],
                quantitative: [
                    { type: 'series', question: "2, 4, 8, 16, ?", options: ["24", "32", "36", "64"], answer: 1, time: 30, explanation: "<strong> 砖转 砖:</strong> 驻砖 转 拽砖专  专 专. 转 拽转 驻专砖 拽注.  , 拽 住 拽注 (驻/拽). <strong>转 砖:</strong> 驻专砖  拽注 (2, 4, 8). 拽 住: 4/2 = 2, 8/4 = 2. 拽转  驻 -2. <strong>住拽:</strong> 16 * 2 = 32." },
                    { type: 'problem', question: "专 爪  80 砖拽. 转  砖 20%.  专 爪 专 ?", options: ["60 砖拽", "64 砖拽", "70 砖拽", "72 砖拽"], answer: 1, time: 45, explanation: "<strong> 砖转 砖:</strong> 驻专拽 转 注转  砖 砖. <strong>转 砖:</strong> 砖 1: 砖  . 20%  20/100, 专 0.2.    80 * 0.2 = 16 砖拽. 砖 2: 驻转转  专 拽专. 80 - 16 = 64. <strong>住拽:</strong> 专 专   64." },
                    { type: 'series', question: "1, 1, 2, 3, 5, 8, ?", options: ["11", "12", "13", "15"], answer: 2, time: 35, explanation: "<strong> 砖转 砖:</strong> 砖住驻专  , 拽   住驻专 拽砖专 拽. <strong>转 砖:</strong>  住专 驻专住转 - 驻爪'. 1+1=2, 1+2=3, 2+3=5, 3+5=8.  专  住 砖 专 砖驻. <strong>住拽:</strong> 5 + 8 = 13." },
                    { type: 'problem', question: "专转 住注转 专转 90 拽''砖.   拽  注专 专拽 砖 45 拽''?", options: ["20 拽转", "30 拽转", "45 拽转", "60 拽转"], answer: 1, time: 45, explanation: "<strong> 砖转 砖:</strong> 砖转砖 住转 '专-专转-'. <strong>转 砖:</strong> 住   = 专 / 专转. 专  45 拽'', 专转  90 拽''砖.  = 45 / 90 = 0.5 砖注转. 砖  拽转,  驻 -60. 0.5 * 60 = 30. <strong>住拽:</strong> 30 拽转." },
                    { type: 'series', question: "1, 4, 9, 16, 25, ?", options: ["32", "35", "36", "40"], answer: 2, time: 30, explanation: "<strong> 砖转 砖:</strong>  转 住驻专.   专 ? <strong>转 砖:</strong> 住驻专  专注 砖 住驻专 注拽: 1虏=1, 2虏=4, 3虏=9, 4虏=16, 5虏=25. 专  住专  专注 砖 6. <strong>住拽:</strong> 6虏 = 36." },
                    { type: 'problem', question: " 3 注  拽专 -9 ,   拽 注  转 转 转 拽专 ?", options: ["3 ", "9 ", "18 ", "27 "], answer: 3, time: 45, explanation: "<strong> 砖转 砖:</strong>  转 住 住 -   砖专  驻? <strong>转 砖:</strong> 驻转 注 -> 转专 .  住 驻.  拽 转 住驻专 注 驻 3 (-3 -1),  注  驻 3. <strong>住拽:</strong> 9  * 3 = 27 ." },
                    { type: 'series', question: "50, 45, 40, 35, ?", options: ["25", "30", "32", "20"], answer: 1, time: 25, explanation: "<strong> 砖转 砖:</strong> 拽 转 驻专砖  专. <strong>转 砖:</strong> 50-5=45, 45-5=40.  住专 砖转 驻砖 注 驻专砖 拽注 砖 住 5. <strong>住拽:</strong> 35 - 5 = 30." },
                    { type: 'problem', question: " 拽 5 注驻专转 -2 砖拽   -3 专转 -7 砖拽  转.  砖 住 ?", options: ["25 砖拽", "29 砖拽", "31 砖拽", "35 砖拽"], answer: 2, time: 40, explanation: "<strong> 砖转 砖:</strong> 砖 转 注转 砖  拽爪转 驻专 驻专,  专. <strong>转 砖:</strong> 注转 注驻专转: 5 * 2 = 10. 注转 专转: 3 * 7 = 21. 住 : 10 + 21 = 31. <strong>住拽:</strong> 31 砖拽." },
                    { type: 'series', question: "100, 99, 97, 94, 90, ?", options: ["85", "86", "84", "88"], answer: 0, time: 40, explanation: "<strong> 砖转 砖:</strong>  驻专砖  拽注, 拽 转 住专转 驻专砖. <strong>转 砖:</strong> 驻专砖 : -1, -2, -3, -4. 转 专转 砖驻专砖  -1  驻注. 驻专砖   -5. <strong>住拽:</strong> 90 - 5 = 85." },
                    { type: 'problem', question: "砖 注 1200 砖''. 转 砖  砖 25%.  转注 砖 专 ?", options: ["800 砖''", "850 砖''", "900 砖''", "950 砖''"], answer: 2, time: 45, explanation: "<strong> 砖转 砖:</strong> 25%  专注. 拽 转专 砖 专注 住驻专. <strong>转 砖:</strong> 专注 -1200  1200 / 4 = 300.  . 专 住驻  1200 - 300 = 900. <strong>住拽:</strong> 900 砖''." },
                    { type: 'problem', question: "转 30 转. 60%  转.   砖 转?", options: ["10", "12", "15", "18"], answer: 1, time: 40, explanation: "<strong> 砖转 砖:</strong>  转  , 砖 转  砖. <strong>转 砖:</strong>  60%  转,  100% - 60% = 40%  . 爪专 砖 40% -30. 专 专: 10% -30  3.  40%  3 * 4 = 12. <strong>住拽:</strong> 12 ." },
                    { type: 'series', question: "2, 5, 11, 23, ?", options: ["46", "47", "42", "35"], answer: 1, time: 40, explanation: "<strong> 砖转 砖:</strong> 拽 拽转 砖 驻 住驻/住专. <strong>转 砖:</strong> 2*2+1 = 5. 5*2+1 = 11. 11*2+1 = 23. 拽转  '驻 2 注 1'. <strong>住拽:</strong> 23 * 2 + 1 = 47." },
                    { type: 'problem', question: "住 拽专 住驻专 拽爪 砖 15 注 砖注. 住驻专 砖 180 注. 转  砖注转 住 拽专 转 住驻专?", options: ["10 砖注转", "11 砖注转", "12 砖注转", "15 砖注转"], answer: 2, time: 40, explanation: "<strong> 砖转 砖:</strong>  注转 住驻拽 驻砖 (拽). <strong>转 砖:</strong>  爪 转 , 拽 转 住 注 (180 注) 拽爪 (15 注/砖注). 180 / 15. 专 专: 15 * 10 = 150. 砖专 30. 15 * 2 = 30. 住'' 10+2=12. <strong>住拽:</strong> 12 砖注转." },
                    { type: 'series', question: "3, 4, 6, 9, 13, ?", options: ["18", "17", "16", "19"], answer: 0, time: 35, explanation: "<strong> 砖转 砖:</strong>  驻专砖  拽注, 拽 转 住专转 驻专砖. <strong>转 砖:</strong> 驻专砖 : +1, +2, +3, +4. 住专转 驻专砖  住专 砖转 驻砖. 驻专砖   +5. <strong>住拽:</strong> 13 + 5 = 18." },
                    { type: 'problem', question: "专 砖 24 驻专转. 1/3  转驻 -1/4  住.  驻专转  转驻  住?", options: ["10", "12", "14", "8"], answer: 0, time: 50, explanation: "<strong> 砖转 砖:</strong> 砖 转 转 砖  拽  住专 砖. <strong>转 砖:</strong> 转驻: 24/3 = 8. 住: 24/4 = 6. 住 转驻 住: 8 + 6 = 14. 砖专 驻专转: 24 - 14 = 10. <strong>住拽:</strong> 10 驻专转." },
                    { type: 'series', question: "90, 88, 84, 78, 70, ?", options: ["60", "62", "58", "64"], answer: 0, time: 40, explanation: "<strong> 砖转 砖:</strong> 拽 转 住专转 驻专砖. <strong>转 砖:</strong> 驻专砖 : -2, -4, -6, -8. 驻专砖  住专   -10. <strong>住拽:</strong> 70 - 10 = 60." },
                    { type: 'problem', question: "注转 砖 驻  0.5 砖'' 拽.  转注 砖 砖 砖注 专注?", options: ["37.5 砖''", "30 砖''", "45 砖''", "32.5 砖''"], answer: 0, time: 40, explanation: "<strong> 砖转 砖:</strong> 专 转    (拽转). <strong>转 砖:</strong> 砖注 = 60 拽转. 专注 砖注 = 15 拽转. 住  60 + 15 = 75 拽转. 注转: 75 * 0.5 ( 拽 -2) = 37.5. <strong>住拽:</strong> 37.5 砖''." },
                    { type: 'series', question: "1, 2, 4, 7, 11, 16, ?", options: ["20", "21", "22", "23"], answer: 2, time: 35, explanation: "<strong> 砖转 砖:</strong> 拽 转 住专转 驻专砖. <strong>转 砖:</strong> 驻专砖 : +1, +2, +3, +4, +5. 驻专砖   +6. <strong>住拽:</strong> 16 + 6 = 22." },
                    { type: 'problem', question: "  15% -300?", options: ["30", "45", "50", "60"], answer: 1, time: 30, explanation: "<strong> 砖转 砖:</strong> 驻专拽 转  拽  (10% -5%). <strong>转 砖:</strong> 10% -300  30 (专 驻住). 5%  爪 -10%, 专 爪 -30, 砖 15. 住  30 + 15 = 45. <strong>住拽:</strong> 45." },
                    { type: 'problem', question: "住  砖    40.  专  -10 砖. 转  ?", options: ["10", "15", "20", "25"], answer: 1, time: 50, explanation: "<strong> 砖转 砖:</strong>  注转 '住 驻专砖'. <strong>转 砖:</strong> 专 转 驻专砖 住: 40 - 10 = 30. 注砖 砖  驻注 转  砖 . 拽 -2: 30 / 2 = 15.   砖 . (  15+10=25). <strong>住拽:</strong>  转 15." },
                ],
                figural: [
                     { type: 'series', question: [ {type: 'container', items: [{shape: 'circle', color: 'black', pos: 'top-left'}] }, {type: 'container', items: [{shape: 'circle', color: 'black', pos: 'top-center'}] }, {type: 'container', items: [{shape: 'circle', color: 'black', pos: 'top-right'}]} ], options: [ [{type: 'container', items: [{shape: 'circle', color: 'black', pos: 'middle-right'}]}], [{type: 'container', items: [{shape: 'circle', color: 'black', pos: 'top-left'}]}], [{type: 'container', items: [{shape: 'square', color: 'black', pos: 'middle-right'}]}], [{type: 'container', items: [{shape: 'circle', color: 'black', pos: 'middle-left'}]}] ], answer: 0, time: 35, explanation: "<strong> 砖转 砖:</strong> 转拽 转注 砖 专 . <strong>转 砖:</strong> 注 砖专  爪注    砖.  住 转 砖专 注,  砖   砖 砖专 爪注转, 爪 ,  拽专转 拽住. <strong>住拽:</strong> 转砖   注 爪注-." },
                     { type: 'series', question: [ {type: 'shape', shape: 'square', color: 'black', rotation: 0}, {type: 'shape', shape: 'square', color: 'black', rotation: 45}, {type: 'shape', shape: 'square', color: 'black', rotation: 90} ], options: [ [{type: 'shape', shape: 'square', color: 'black', rotation: 180}], [{type: 'shape', shape: 'square', color: 'black', rotation: 135}], [{type: 'shape', shape: 'square', color: 'black', rotation: 90}], [{type: 'shape', shape: 'square', color: 'white', rotation: 135}] ], answer: 1, time: 30, explanation: "<strong> 砖转 砖:</strong> 拽  砖 砖 转 砖 爪专. <strong>转 砖:</strong> 专注 住转 -45 注转 注  砖注  砖. 砖 专  90 注转,  砖   90 + 45. <strong>住拽:</strong> 135 注转." },
                     { type: 'matrix', question: [ {type: 'shape', shape: 'circle', color: 'white', border: 'black'}, {type: 'shape', shape: 'circle', color: 'gray'}, {type: 'shape', shape: 'circle', color: 'black'}, {type: 'shape', shape: 'square', color: 'white', border: 'black'}, {type: 'shape', shape: 'square', color: 'gray'}, '?' ], options: [ [{type: 'shape', shape: 'square', color: 'black'}], [{type: 'shape', shape: 'square', color: 'white', border: 'black'}], [{type: 'shape', shape: 'circle', color: 'black'}], [{type: 'shape', shape: 'square', color: 'gray'}] ], answer: 0, time: 45, explanation: "<strong> 砖转 砖:</strong> 专爪, 驻砖 拽转 驻砖 专 砖专转  注转. <strong>转 砖:</strong> 拽转  砖专  专爪祝 砖 : , 驻专, 砖专. 砖专 砖 砖   驻专,  住专 砖专. 爪专 (专注) 砖专转 拽注 专 砖专. <strong>住拽:</strong> 专注 砖专." },
                     { type: 'series', question: [ {type: 'container', items: [{shape: 'line-v', color: 'black'}]}, {type: 'container', items: [{shape: 'line-v', color: 'black'}, {shape: 'line-h', color: 'black'}]}, {type: 'container', items: [{shape: 'line-v', color: 'black'}, {shape: 'line-h', color: 'black'}, {shape: 'line-v', color: 'black', pos: 'right'}]} ], options: [ [{type: 'container', items: [{shape: 'line-v', color: 'black'}, {shape: 'line-h', color: 'black'}, {shape: 'line-v', color: 'black', pos: 'right'}, {shape: 'line-h', color: 'black', pos: 'bottom'}]}], [{type: 'container', items: [{shape: 'line-v', color: 'black'}, {shape: 'line-h', color: 'black'}]}], [{type: 'container', items: [{shape: 'line-v', color: 'black'}, {shape: 'line-v', color: 'black', pos: 'right'}]}], [{type: 'container', items: [{shape: 'line-v', color: 'black'}, {shape: 'line-h', color: 'black'}, {shape: 'line-v', color: 'black', pos: 'right'}, {shape: 'line-h', color: 'black', pos: 'top'}]}] ], answer: 0, time: 40, explanation: "<strong> 砖转 砖:</strong> 拽  爪专转 转住驻转 驻 砖转. <strong>转 砖:</strong>  砖 住祝 拽  爪专转 专注, 驻 住专 拽注 注  砖注: 拽 砖, 拽 注, 拽 . 砖  住祝 转 拽 转转 砖转 专注. <strong>住拽:</strong> 专注 砖." },
                    { type: 'series', question: [ {type: 'shape', shape: 'triangle', color: 'black', rotation: 0}, {type: 'shape', shape: 'triangle', color: 'black', rotation: 90}, {type: 'shape', shape: 'triangle', color: 'black', rotation: 180} ], options: [ [{type: 'shape', shape: 'triangle', color: 'black', rotation: 270}], [{type: 'shape', shape: 'triangle', color: 'black', rotation: 0}], [{type: 'shape', shape: 'square', color: 'black'}], [{type: 'shape', shape: 'triangle', color: 'black', rotation: 180}] ], answer: 0, time: 35, explanation: "<strong> 砖转 砖:</strong> 拽 转 住 砖 爪专. <strong>转 砖:</strong> 砖砖 住转 -90 注转 注  砖注  砖. 专 180 注转, 砖   住 -270 注转 ( 驻 ). <strong>住拽:</strong> 砖砖 -270 注转." },
                    { type: 'matrix', question: [ {type: 'shape', shape: 'circle', color: 'black'}, {type: 'shape', shape: 'square', color: 'black'}, {type: 'shape', shape: 'triangle', color: 'black'}, {type: 'shape', shape: 'square', color: 'black'}, {type: 'shape', shape: 'triangle', color: 'black'}, '?' ], options: [ [{type: 'shape', shape: 'circle', color: 'black'}], [{type: 'shape', shape: 'square', color: 'black'}], [{type: 'shape', shape: 'triangle', color: 'black'}], [{type: 'shape', shape: 'circle', color: 'white'}] ], answer: 0, time: 45, explanation: "<strong> 砖转 砖:</strong> 驻砖 拽转 砖 '住拽' - 住 砖 砖 爪专转  砖专. <strong>转 砖:</strong> 砖专 专砖 砖 注, 专注 砖砖. 砖专 砖 砖 专注 砖砖,  住专 爪专转 注  砖 转 住. <strong>住拽:</strong> 注 砖专." },
                    { type: 'series', question: [ {type: 'container', items: [{shape: 'circle', color: 'black'}] }, {type: 'container', items: [{shape: 'circle', color: 'black'}, {shape: 'square', color: 'red'}] }, {type: 'container', items: [{shape: 'circle', color: 'black'}, {shape: 'square', color: 'red'}, {shape: 'triangle', color: 'blue'}]} ], options: [ [{type: 'container', items: [{shape: 'circle', color: 'black'}, {shape: 'square', color: 'red'}]}], [{type: 'container', items: [{shape: 'circle', color: 'black'}, {shape: 'square', color: 'red'}, {shape: 'triangle', color: 'blue'}, {shape: 'circle', color: 'green'}]}], [{type: 'container', items: []}], [{type: 'container', items: [{shape: 'circle', color: 'black'}, {shape: 'square', color: 'red'}, {shape: 'triangle', color: 'blue'}]}] ], answer: 1, time: 40, explanation: "<strong> 砖转 砖:</strong> 拽 住驻 砖转转 砖 . <strong>转 砖:</strong>  砖 转住驻转 爪专 砖 住专 拽注 (注, 专注, 砖砖, 注 住祝 爪注 专). 砖  住祝 转 爪专 专注转 住专. <strong>住拽:</strong>  爪专转 拽转 + 注 专拽." },
                    { type: 'matrix', question: [ {type: 'shape', shape: 'circle', color: 'black'}, {type: 'shape', shape: 'circle', color: 'white', border: 'black'}, {type: 'shape', shape: 'circle', color: 'black'}, {type: 'shape', shape: 'square', color: 'black'}, {type: 'shape', shape: 'square', color: 'white', border: 'black'}, '?' ], options: [ [{type: 'shape', shape: 'square', color: 'black'}], [{type: 'shape', shape: 'square', color: 'white', border: 'black'}], [{type: 'shape', shape: 'circle', color: 'black'}], [{type: 'shape', shape: 'triangle', color: 'black'}] ], answer: 0, time: 40, explanation: "<strong> 砖转 砖:</strong>  转 转转 专转  砖专. <strong>转 砖:</strong> 转转  砖专 : 爪专 , 爪专 专拽, 爪专 . 砖专 砖 砖 专注  专注 专拽,  住专 专注 . <strong>住拽:</strong> 专注 砖专." },
                    { type: 'series', question: [ {type: 'shape', shape: 'circle', color: 'black'}, {type: 'shape', shape: 'square', color: 'white', border: 'black'}, {type: 'shape', shape: 'circle', color: 'black'} ], options: [ [{type: 'shape', shape: 'square', color: 'white', border: 'black'}], [{type: 'shape', shape: 'circle', color: 'black'}], [{type: 'shape', shape: 'square', color: 'black'}], [{type: 'shape', shape: 'circle', color: 'white', border: 'black'}] ], answer: 0, time: 30, explanation: "<strong> 砖转 砖:</strong>  转 专爪祝 转祝. <strong>转 砖:</strong> 住专 专转 砖  转驻 住专: 注 砖专 专注 . 专 注 砖专  专注 . <strong>住拽:</strong> 专注  注 住专转 砖专." },
                    { type: 'matrix', question: [ {type: 'shape', shape: 'triangle', rotation: 0, color: 'black'}, {type: 'shape', shape: 'triangle', rotation: 90, color: 'black'}, {type: 'shape', shape: 'triangle', rotation: 180, color: 'black'}, {type: 'shape', shape: 'square', color: 'black'}, {type: 'shape', shape: 'square', color: 'black'}, '?' ], options: [ [{type: 'shape', shape: 'square', color: 'black'}], [{type: 'shape', shape: 'triangle', rotation: 270, color: 'black'}], [{type: 'shape', shape: 'circle', color: 'black'}], [{type: 'shape', shape: 'square', color: 'white'}] ], answer: 0, time: 45, explanation: "<strong> 砖转 砖:</strong> 转 转 拽转  砖专 驻专. <strong>转 砖:</strong> 砖专 专砖 砖 住 砖 砖砖. 砖专 砖 砖 砖砖 专注 . 拽转  砖爪专 砖专转 拽注 专 砖专. <strong>住拽:</strong> 专注 砖专." },
                    { type: 'series', question: [ {type: 'container', items: [{shape: 'circle', color: 'black', pos: 'top-left'}]}, {type: 'container', items: [{shape: 'circle', color: 'black', pos: 'middle-center'}]}, {type: 'container', items: [{shape: 'circle', color: 'black', pos: 'bottom-right'}]} ], options: [ [{type: 'container', items: [{shape: 'circle', color: 'black', pos: 'bottom-left'}]}], [{type: 'container', items: [{shape: 'circle', color: 'black', pos: 'top-right'}]}], [{type: 'container', items: [{shape: 'circle', color: 'black', pos: 'top-left'}]}], [{type: 'container', items: [{shape: 'circle', color: 'black', pos: 'middle-center'}]}] ], answer: 2, time: 35, explanation: "<strong> 砖转 砖:</strong> 注拽 专 转注 住转. <strong>转 砖:</strong> 注 注 住 砖 注  . 专 砖 注 驻 转 转转, 住专 转 砖 驻 砖转 注. <strong>住拽:</strong> 注 驻 砖转 注." },
                    { type: 'matrix', question: [ {type: 'shape', shape: 'square', color: 'black'}, {type: 'shape', shape: 'circle', color: 'black'}, {type: 'container', items: [{shape: 'square', color: 'black'}, {shape: 'circle', color: 'white', pos: 'middle-center'}]}, {type: 'shape', shape: 'triangle', color: 'black'}, {type: 'shape', shape: 'square', color: 'black'}, '?' ], options: [ [{type: 'shape', shape: 'triangle', color: 'black'}] ,[{type: 'container', items: [{shape: 'triangle', color: 'black'}, {shape: 'square', color: 'white', pos: 'middle-center'}]}], [{type: 'shape', shape: 'circle', color: 'black'}], [{type: 'container', items: [{shape: 'square', color: 'black'}, {shape: 'triangle', color: 'white', pos: 'middle-center'}]}] ], answer: 1, time: 55, explanation: "<strong> 砖转 砖:</strong>  拽转 砖 ''. 砖砖  砖 砖 专砖 砖. <strong>转 砖:</strong> 砖专 专砖, 爪专 专砖 (专注) 驻转 住专转, 爪专 砖 (注) 住转 驻 爪注 .  转 转  注 砖专 砖: 砖砖 驻 住专转, 专注 住 驻 爪注 . <strong>住拽:</strong> 砖砖 注 专注  驻." },
                    { type: 'series', question: [ {type: 'container', items: [{shape: 'circle', color: 'black', pos: 'top-left'}, {shape: 'circle', color: 'black', pos: 'bottom-right'}] }, {type: 'container', items: [{shape: 'circle', color: 'black', pos: 'top-right'}, {shape: 'circle', color: 'black', pos: 'bottom-left'}] }, {type: 'container', items: [{shape: 'circle', color: 'black', pos: 'top-left'}, {shape: 'circle', color: 'black', pos: 'bottom-right'}]} ], options: [ [{type: 'container', items: [{shape: 'circle', color: 'black', pos: 'top-left'}, {shape: 'circle', color: 'black', pos: 'bottom-right'}]}], [{type: 'container', items: [{shape: 'circle', color: 'black', pos: 'top-right'}, {shape: 'circle', color: 'black', pos: 'bottom-left'}]}], [{type: 'container', items: [{shape: 'circle', color: 'black', pos: 'top-center'}, {shape: 'circle', color: 'black', pos: 'bottom-center'}]}], [{type: 'container', items: []}] ], answer: 1, time: 35, explanation: "<strong> 砖转 砖:</strong>  专爪祝 转祝 砖 砖 爪. <strong>转 砖:</strong> 住专 专转 砖 爪: 住 专 住 注.  驻注 住专. 专 住 专,  住 注. <strong>住拽:</strong> 注 驻 转 注 砖转 转转." },
                    { type: 'matrix', question: [ {type: 'shape', shape: 'square', color: 'white', border: 'black'}, {type: 'shape', shape: 'square', color: 'black'}, {type: 'shape', shape: 'square', color: 'white', border: 'black'}, {type: 'shape', shape: 'circle', color: 'white', border: 'black'}, '?', {type: 'shape', shape: 'circle', color: 'white', border: 'black'} ], options: [ [{type: 'shape', shape: 'square', color: 'black'}], [{type: 'shape', shape: 'circle', color: 'gray'}], [{type: 'shape', shape: 'circle', color: 'black'}], [{type: 'shape', shape: 'circle', color: 'white', border: 'black'}] ], answer: 2, time: 45, explanation: "<strong> 砖转 砖:</strong> 转 转 拽转 注转 砖专转. <strong>转 砖:</strong> 注 专砖 砖砖转 砖 转 转 爪专. 注 爪注转 砖 爪专 爪注 驻. 砖专 砖 砖 注 专拽,  注 爪注转  注 . <strong>住拽:</strong> 注 砖专." },
                    { type: 'series', question: [ {type: 'shape', shape: 'square', color: 'black'}, {type: 'shape', shape: 'square', color: 'gray'}, {type: 'shape', shape: 'square', color: 'white', border: 'black'} ], options: [ [{type: 'shape', shape: 'square', color: 'black'}], [{type: 'shape', shape: 'square', color: 'gray'}], [{type: 'shape', shape: 'circle', color: 'black'}], [{type: 'shape', shape: 'square', color: 'white', border: 'black'}] ], answer: 0, time: 35, explanation: "<strong> 砖转 砖:</strong>  专爪祝 专. <strong>转 砖:</strong> 住专 注专转  砖砖 爪 : 砖专, 驻专, . 专 爪 , 住专 专转 转. <strong>住拽:</strong> 专注 砖专." },
                    { type: 'matrix', question: [ {type: 'shape', shape: 'triangle', color: 'black'}, {type: 'shape', shape: 'square', color: 'black'}, {type: 'shape', shape: 'circle', color: 'black'}, {type: 'shape', shape: 'triangle', color: 'gray'}, {type: 'shape', shape: 'square', color: 'gray'}, '?' ], options: [ [{type: 'shape', shape: 'square', color: 'gray'}], [{type: 'shape', shape: 'circle', color: 'gray'}], [{type: 'shape', shape: 'circle', color: 'black'}], [{type: 'shape', shape: 'triangle', color: 'gray'}] ], answer: 1, time: 40, explanation: "<strong> 砖转 砖:</strong> 砖  砖专 专砖 砖. <strong>转 砖:</strong> 砖专 砖  专 拽转 注 爪专转 砖 砖专 专砖,  爪注 驻专 拽 砖专. 专 砖砖 驻专 专注 驻专,  注 驻专. <strong>住拽:</strong> 注 驻专." },
                    { type: 'series', question: [ {type: 'container', items: [{shape: 'line-v', color: 'black', pos: 'left'}, {shape: 'line-v', color: 'black', pos: 'right'}]}, {type: 'container', items: [{shape: 'line-h', color: 'black', pos: 'top'}, {shape: 'line-h', color: 'black', pos: 'bottom'}]}, {type: 'container', items: [{shape: 'line-v', color: 'black', pos: 'left'}, {shape: 'line-v', color: 'black', pos: 'right'}]} ], options: [ [{type: 'container', items: []}], [{type: 'container', items: [{shape: 'line-v', color: 'black', pos: 'left'}]}], [{type: 'container', items: [{shape: 'line-h', color: 'black', pos: 'top'}, {shape: 'line-h', color: 'black', pos: 'bottom'}]}], [{type: 'container', items: [{shape: 'line-v', color: 'black', pos: 'left'}, {shape: 'line-v', color: 'black', pos: 'right'}]}] ], answer: 2, time: 30, explanation: "<strong> 砖转 砖:</strong>  专爪祝 转祝 砖 砖 爪. <strong>转 砖:</strong> 住专 专转 砖 爪: 拽  拽 驻拽.  驻注 住专. 专 拽   拽 驻拽. <strong>住拽:</strong> 拽 驻拽." },
                    { type: 'matrix', question: [ {type: 'shape', shape: 'circle', color: 'black'}, {type: 'shape', shape: 'circle', color: 'black'}, {type: 'shape', shape: 'circle', color: 'black'}, {type: 'shape', shape: 'square', color: 'black'}, '?', {type: 'shape', shape: 'square', color: 'black'} ], options: [ [{type: 'shape', shape: 'circle', color: 'black'}], [{type: 'shape', shape: 'square', color: 'black'}], [{type: 'shape', shape: 'triangle', color: 'black'}], [{type: 'shape', shape: 'square', color: 'white'}] ], answer: 1, time: 35, explanation: "<strong> 砖转 砖:</strong> 转 转 拽转 驻砖 转专. <strong>转 砖:</strong>  砖专 专转 爪专 转 . 砖专 专砖  注. 砖专 砖  专注. <strong>住拽:</strong> 专注 砖专." },
                    { type: 'series', question: [ {type: 'container', items: [{shape: 'triangle', color: 'black', pos: 'top-center'}]}, {type: 'container', items: [{shape: 'triangle', color: 'black', pos: 'middle-right'}]}, {type: 'container', items: [{shape: 'triangle', color: 'black', pos: 'bottom-center'}]} ], options: [ [{type: 'container', items: [{shape: 'triangle', color: 'black', pos: 'middle-left'}]}], [{type: 'container', items: [{shape: 'triangle', color: 'black', pos: 'top-center'}]}], [{type: 'container', items: [{shape: 'triangle', color: 'black', pos: 'bottom-right'}]}], [{type: 'container', items: [{shape: 'triangle', color: 'black', pos: 'middle-center'}]}] ], answer: 0, time: 40, explanation: "<strong> 砖转 砖:</strong> 注拽 专 转注转 爪专 注 拽祝 专注. <strong>转 砖:</strong> 砖砖 注 注  砖注 住 爪注转 专注: 注, , . 爪注   爪 砖. <strong>住拽:</strong> 砖砖 爪 砖." },
                    { type: 'matrix', question: [ {type: 'shape', shape: 'circle', color: 'black'}, {type: 'shape', shape: 'square', color: 'black'}, {type: 'shape', shape: 'circle', color: 'black'}, {type: 'shape', shape: 'square', color: 'black'}, '?', {type: 'shape', shape: 'square', color: 'black'} ], options: [ [{type: 'shape', shape: 'circle', color: 'black'}], [{type: 'shape', shape: 'square', color: 'black'}], [{type: 'shape', shape: 'triangle', color: 'black'}], [{type: 'shape', shape: 'circle', color: 'white'}] ], answer: 0, time: 40, explanation: "<strong> 砖转 砖:</strong> 转 转 拽转 注转. <strong>转 砖:</strong> 注 专砖 专转 爪专转 转驻转: 注, 专注. 注 砖砖转 . 注 爪注转 爪专 转  砖专: 专注 专  注. <strong>住拽:</strong> 注 砖专." },
                ]
            },
            currentCategory: null,
            currentQuestions: [],
            currentQuestionIndex: 0,
            userAnswers: [],
            timerInterval: null,
            categoryMap: {
                verbal: { name: "砖 转", color: "bg-blue-500" },
                quantitative: { name: "砖 转转", color: "bg-green-500" },
                figural: { name: "砖 爪专转", color: "bg-purple-500" },
            },

            init() {
                this.elements = {
                    welcomeScreen: document.getElementById('welcome-screen'),
                    quizScreen: document.getElementById('quiz-screen'),
                    resultsScreen: document.getElementById('results-screen'),
                    categoryButtons: document.querySelectorAll('.category-btn'),
                    quizCategory: document.getElementById('quiz-category'),
                    questionNumber: document.getElementById('question-number'),
                    totalQuestions: document.getElementById('total-questions'),
                    progressBar: document.getElementById('progress-bar'),
                    timer: document.getElementById('timer'),
                    questionArea: document.getElementById('question-area'),
                    optionsArea: document.getElementById('options-area'),
                    explanationArea: document.getElementById('explanation-area'),
                    nextBtn: document.getElementById('next-btn'),
                    backToMenuBtn: document.getElementById('back-to-menu-btn'),
                    scoreDisplay: document.getElementById('score-display'),
                    scorePercentage: document.getElementById('score-percentage'),
                    answersReviewContainer: document.getElementById('answers-review-container'),
                    restartQuizBtn: document.getElementById('restart-quiz-btn'),
                    mainMenuBtn: document.getElementById('main-menu-btn'),
                };
                this.addEventListeners();
            },

            addEventListeners() {
                this.elements.categoryButtons.forEach(btn => btn.addEventListener('click', (e) => this.startQuiz(e.currentTarget.dataset.category)));
                this.elements.nextBtn.addEventListener('click', () => this.nextQuestion());
                this.elements.backToMenuBtn.addEventListener('click', () => this.showWelcomeScreen());
                this.elements.restartQuizBtn.addEventListener('click', () => this.startQuiz(this.currentCategory));
                this.elements.mainMenuBtn.addEventListener('click', () => this.showWelcomeScreen());
            },

            startQuiz(category) {
                if (this.timerInterval) clearInterval(this.timerInterval);
                this.currentCategory = category;
                this.currentQuestions = this.shuffleArray([...this.questions[category]]);
                this.currentQuestionIndex = 0;
                this.userAnswers = [];
                
                this.elements.welcomeScreen.classList.add('hidden');
                this.elements.resultsScreen.classList.add('hidden');
                this.elements.quizScreen.classList.remove('hidden');

                const categoryInfo = this.categoryMap[category];
                this.elements.quizCategory.textContent = categoryInfo.name;
                this.elements.progressBar.className = `h-2.5 rounded-full transition-all duration-500 ${categoryInfo.color}`;

                this.elements.totalQuestions.textContent = this.currentQuestions.length;
                this.displayQuestion();
            },

            displayQuestion() {
                if (this.timerInterval) clearInterval(this.timerInterval);
                const q = this.currentQuestions[this.currentQuestionIndex];
                this.elements.questionNumber.textContent = this.currentQuestionIndex + 1;
                this.elements.nextBtn.disabled = true;
                this.elements.explanationArea.innerHTML = '';
                
                const progress = ((this.currentQuestionIndex) / this.currentQuestions.length) * 100;
                this.elements.progressBar.style.width = `${progress}%`;
                
                this.startTimer(q.time);

                this.elements.questionArea.innerHTML = this.renderQuestionContent(q);
                this.elements.optionsArea.innerHTML = this.renderOptionsContent(q);

                this.elements.optionsArea.querySelectorAll('.option-btn').forEach((btn, index) => {
                    btn.addEventListener('click', () => this.selectOption(index));
                });
            },

            startTimer(duration) {
                let timeLeft = duration;
                const timerEl = this.elements.timer;

                const updateTimer = () => {
                    const minutes = Math.floor(timeLeft / 60);
                    let seconds = timeLeft % 60;
                    seconds = seconds < 10 ? '0' + seconds : seconds;
                    timerEl.textContent = `${minutes}:${seconds}`;
                    if (timeLeft <= 5) {
                        timerEl.classList.add('text-red-500');
                    } else {
                        timerEl.classList.remove('text-red-500');
                    }
                };

                updateTimer();

                this.timerInterval = setInterval(() => {
                    timeLeft--;
                    updateTimer();
                    if (timeLeft < 0) {
                        clearInterval(this.timerInterval);
                        this.handleTimeout();
                    }
                }, 1000);
            },
            
            handleTimeout() {
                this.userAnswers[this.currentQuestionIndex] = undefined; // Mark as unanswered
                const q = this.currentQuestions[this.currentQuestionIndex];
                
                const optionButtons = this.elements.optionsArea.querySelectorAll('.option-btn');
                optionButtons.forEach(btn => {
                    btn.disabled = true;
                    btn.style.opacity = '0.5';
                });
                
                const correctBtn = optionButtons[q.answer];
                if(correctBtn) {
                    correctBtn.classList.add('correct');
                    correctBtn.style.opacity = '1';
                }
                
                this.elements.explanationArea.innerHTML = `
                    <div class="mt-4 p-3 bg-yellow-50 border-r-4 border-yellow-500 rounded">
                        <h4 class="font-bold text-yellow-800">  !</h4>
                        <p class="text-slate-700">${q.explanation}</p>
                    </div>
                `;
                
                this.elements.nextBtn.disabled = false;
            },
            
            renderQuestionContent(q) {
                if (this.currentCategory === 'figural') {
                    const items = Array.isArray(q.question) ? q.question : [q.question];
                    let content = '<div class="flex items-center justify-center gap-2 flex-wrap">';
                    items.forEach(item => {
                        if (item === '?') {
                            content += '<div class="w-12 h-12 flex items-center justify-center bg-slate-200 rounded text-2xl font-bold">?</div>';
                        } else {
                            content += this.renderShape(item);
                        }
                    });
                    content += '</div>';
                    return content;
                }
                return `<p class="text-center text-xl font-semibold text-slate-800">${q.question}</p>`;
            },

            renderOptionsContent(q) {
                let optionsHtml = '';
                q.options.forEach((option, index) => {
                    const items = Array.isArray(option) ? option : [option];
                    let content;
                    if (this.currentCategory === 'figural') {
                        content = '<div class="flex items-center justify-center gap-1">';
                        items.forEach(item => content += this.renderShape(item));
                        content += '</div>';
                    } else {
                        content = option;
                    }
                    optionsHtml += `<button data-index="${index}" class="option-btn border-2 border-slate-300 p-4 rounded-lg flex items-center justify-center min-h-[80px] text-lg">${content}</button>`;
                });
                return optionsHtml;
            },

            renderShape(item) {
                const colorMap = { 'blue': '#3b82f6', 'red': '#ef4444', 'green': '#22c55e', 'yellow': '#eab308', 'purple': '#8b5cf6', 'white': '#ffffff', 'black': '#000000', 'gray': '#9ca3af' };
                const bgColor = colorMap[item.color] || item.color;
                const rotation = item.rotation || 0;
                
                let baseStyle = `transform: rotate(${rotation}deg);`;
                if(item.border) baseStyle += ` border: 2px solid ${colorMap[item.border]};`;

                if (item.type === 'container') {
                    let itemsHtml = '';
                    item.items.forEach(inner => {
                        let posClass = 'absolute';
                        if(inner.pos === 'top-left') posClass += ' top-1 left-1';
                        if(inner.pos === 'top-center') posClass += ' top-1 left-1/2 -translate-x-1/2';
                        if(inner.pos === 'top-right') posClass += ' top-1 right-1';
                        if(inner.pos === 'middle-left') posClass += ' top-1/2 left-1 -translate-y-1/2';
                        if(inner.pos === 'middle-center') posClass += ' top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2';
                        if(inner.pos === 'middle-right') posClass += ' top-1/2 right-1 -translate-y-1/2';
                        if(inner.pos === 'bottom-left') posClass += ' bottom-1 left-1';
                        if(inner.pos === 'bottom-center') posClass += ' bottom-1 left-1/2 -translate-x-1/2';
                        if(inner.pos === 'bottom-right') posClass += ' bottom-1 right-1';

                        if(inner.shape === 'line-v') {
                            let sideClass = ' left-0';
                            if (inner.pos === 'right') sideClass = ' right-0';
                            itemsHtml += `<div class="absolute top-0 h-full w-1" style="background-color:${colorMap[inner.color]}; ${sideClass}"></div>`;
                        } else if(inner.shape === 'line-h') {
                            let sideClass = ' top-0';
                            if (inner.pos === 'bottom') sideClass = ' bottom-0';
                            itemsHtml += `<div class="absolute left-0 w-full h-1" style="background-color:${colorMap[inner.color]}; ${sideClass}"></div>`;
                        }
                        else {
                            itemsHtml += `<div class="${posClass}">${this.renderShape(inner)}</div>`;
                        }
                    });
                    return `<div class="relative shape square" style="background-color: #f1f5f9;">${itemsHtml}</div>`;
                }

                if (item.shape === 'triangle') {
                    return `<div class="relative shape-sm triangle flex items-center justify-center" style="border-bottom-color: ${bgColor}; ${baseStyle}"></div>`;
                }
                return `<div class="relative shape-sm ${item.shape} flex items-center justify-center" style="background-color: ${bgColor}; ${baseStyle}"></div>`;
            },
            
            selectOption(index) {
                if (this.timerInterval) clearInterval(this.timerInterval);
                this.userAnswers[this.currentQuestionIndex] = index;
                const q = this.currentQuestions[this.currentQuestionIndex];
                const isCorrect = index === q.answer;

                const optionButtons = this.elements.optionsArea.querySelectorAll('.option-btn');
                
                optionButtons.forEach(btn => {
                    btn.disabled = true;
                    if (btn.dataset.index != q.answer && btn.dataset.index != index) {
                        btn.style.opacity = '0.5';
                    }
                });

                const selectedBtn = optionButtons[index];
                
                if (isCorrect) {
                    selectedBtn.classList.add('correct');
                    this.elements.explanationArea.innerHTML = `
                        <div class="mt-4 p-3 bg-green-50 border-r-4 border-green-500 rounded">
                            <h4 class="font-bold text-green-800">锔 转砖 </h4>
                            <p class="text-slate-700">${q.explanation}</p>
                        </div>
                    `;
                } else {
                    selectedBtn.classList.add('incorrect');
                    const correctBtn = optionButtons[q.answer];
                    if(correctBtn) correctBtn.classList.add('correct');
                    
                    this.elements.explanationArea.innerHTML = `
                        <div class="mt-4 p-3 bg-red-50 border-r-4 border-red-500 rounded">
                            <h4 class="font-bold text-red-800"> 转砖 砖</h4>
                            <p class="text-slate-700">${q.explanation}</p>
                        </div>
                    `;
                }
                
                this.elements.nextBtn.disabled = false;
            },
            
            nextQuestion() {
                if (this.timerInterval) clearInterval(this.timerInterval);
                this.currentQuestionIndex++;
                if (this.currentQuestionIndex < this.currentQuestions.length) {
                    this.displayQuestion();
                } else {
                    this.showResults();
                }
            },
            
            showResults() {
                this.elements.quizScreen.classList.add('hidden');
                this.elements.resultsScreen.classList.remove('hidden');

                let correctAnswers = 0;
                this.elements.answersReviewContainer.innerHTML = '';

                this.currentQuestions.forEach((q, index) => {
                    const userAnswerIndex = this.userAnswers[index];
                    const isCorrect = userAnswerIndex === q.answer;
                    if (isCorrect) correctAnswers++;

                    const questionContent = this.currentCategory === 'figural' 
                        ? '砖 爪专转 ' + (index+1) 
                        : `"${q.question}"`;

                    let userAnswerText;
                    if (userAnswerIndex === undefined) {
                        userAnswerText = ' 注转 ( )';
                    } else if (this.currentCategory === 'figural') {
                        userAnswerText = `专 ${userAnswerIndex + 1}`;
                    } else {
                        userAnswerText = `"${q.options[userAnswerIndex]}"`;
                    }
                    

                    const correctAnswerText = this.currentCategory === 'figural' 
                        ? `专 ${q.answer + 1}`
                        : `"${q.options[q.answer]}"`;
                    
                    let resultClass = isCorrect ? 'bg-green-50' : 'bg-red-50';
                    if (userAnswerIndex === undefined) resultClass = 'bg-yellow-50';

                    this.elements.answersReviewContainer.innerHTML += `
                        <div class="p-3 rounded-lg ${resultClass}">
                            <p class="font-semibold text-slate-800">${index + 1}. ${questionContent}</p>
                            <p class="text-sm font-semibold ${isCorrect ? 'text-green-800' : 'text-red-800'}">
                                <span class="font-normal">转砖 砖:</span> ${userAnswerText} ${isCorrect ? '锔' : (userAnswerIndex === undefined ? '' : '')}
                            </p>
                            ${!isCorrect ? `
                                <div class="mt-2 pt-2 border-t ${userAnswerIndex === undefined ? 'border-yellow-200' : 'border-red-200'}">
                                    <p class="text-sm font-semibold text-slate-700"><span class="font-normal">转砖 :</span> ${correctAnswerText}</p>
                                    <p class="text-xs text-slate-600 mt-1">${q.explanation}</p>
                                </div>
                            ` : ''}
                        </div>
                    `;
                });

                this.elements.scoreDisplay.textContent = `${correctAnswers}/${this.currentQuestions.length}`;
                const percentage = this.currentQuestions.length > 0 ? Math.round((correctAnswers / this.currentQuestions.length) * 100) : 0;
                this.elements.scorePercentage.textContent = `${percentage}% 爪`;
            },

            showWelcomeScreen() {
                if (this.timerInterval) clearInterval(this.timerInterval);
                this.elements.quizScreen.classList.add('hidden');
                this.elements.resultsScreen.classList.add('hidden');
                this.elements.welcomeScreen.classList.remove('hidden');
            },

            shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }
        };

        app.init();
    </script>
</body>
</html>

