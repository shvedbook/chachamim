<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>משחק הכנה לראיון - תהליכי Priority</title>
    <style>
        /* General Body Styles */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #f0f2f5;
            color: #1c1e21;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Main Game Container */
        #game-container {
            background-color: #ffffff;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            width: 100%;
            max-width: 800px;
            padding: 35px 40px;
            text-align: center;
            border: 1px solid #dddfe2;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        /* Headers */
        h1 {
            color: #0d1117;
            margin-bottom: 10px;
            font-size: 2rem;
        }

        h2#category-title {
            font-size: 1.3rem;
            color: #0969da;
            margin-bottom: 25px;
            font-weight: 600;
            background-color: #ddf4ff;
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
        }
        
        /* Question Area */
        #question-area {
            min-height: 90px;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
        }

        #question-text {
            font-size: 1.5rem;
            color: #333;
            line-height: 1.6;
            margin: 0;
            font-weight: 500;
        }
        
        /* Answers Container */
        #answers-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .answer-btn {
            background-color: #fff;
            color: #0969da;
            border: 2px solid #0969da;
            padding: 15px;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            width: 100%;
            height: 100%; /* Ensure buttons have same height */
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 60px;
        }
        
        .answer-btn:not(:disabled):hover {
            background-color: #ddf4ff;
            transform: translateY(-2px);
        }

        .answer-btn.correct {
            background-color: #28a745;
            border-color: #28a745;
            color: white;
        }

        .answer-btn.incorrect {
            background-color: #dc3545;
            border-color: #dc3545;
            color: white;
        }

        .answer-btn:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }
        
        /* Feedback Area */
        #feedback-area {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            font-size: 1rem;
            display: none; /* Hidden by default */
            border: 1px solid;
            text-align: right;
        }
        
        #feedback-area.correct-feedback {
            background-color: #e9f7ec;
            border-color: #28a745;
            color: #155724;
        }
        
        #feedback-area.incorrect-feedback {
             background-color: #f8d7da;
             border-color: #dc3545;
             color: #721c24;
        }
        
        #feedback-area strong {
            font-weight: 700;
        }

        /* Next/Restart Buttons */
        .btn {
            background: linear-gradient(135deg, #0969da, #0366d6);
            color: white;
            border: none;
            padding: 15px 35px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(9, 105, 218, 0.2);
            display: inline-block;
            margin-top: 20px;
        }

        #next-button {
            display: none; /* Hidden until an answer is selected */
        }

        /* Progress Bar */
        #progress-container {
            width: 100%;
            background-color: #e9ecef;
            border-radius: 10px;
            margin-top: 35px;
            overflow: hidden;
        }

        #progress-bar {
            width: 0%;
            height: 12px;
            background: linear-gradient(90deg, #1aaa55, #24b47e);
            border-radius: 10px;
            transition: width 0.5s cubic-bezier(0.25, 1, 0.5, 1);
        }

        #progress-text {
            margin-top: 10px;
            font-size: 1rem;
            color: #6c757d;
            font-weight: 500;
        }

        /* Screens Management */
        .screen {
            display: none;
        }
        #start-screen {
            display: block;
        }
    </style>
</head>
<body>

    <div id="game-container">
        <!-- Start Screen -->
        <div id="start-screen" class="screen">
            <h1>🚀 משחק הכנה לראיון (תהליכי Priority)</h1>
            <p style="margin-bottom: 30px; font-size: 1.1rem; color: #495057;">
               השאלות הבאות בוחנות הבנה עמוקה של תהליכי העבודה במערכת. בהצלחה!
            </p>
            <button id="start-button" class="btn">התחל במשחק</button>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="screen">
            <h2 id="category-title"></h2>
            <div id="question-area">
                <p id="question-text"></p>
            </div>
            <div id="answers-container"></div>
            <div id="feedback-area"></div>
            <button id="next-button" class="btn">השאלה הבאה &larr;</button>
            <div id="progress-container">
                <div id="progress-bar"></div>
            </div>
            <p id="progress-text"></p>
        </div>

        <!-- End Screen -->
        <div id="end-screen" class="screen">
            <h1>🎉 כל הכבוד! סיימת את ההכנה.</h1>
            <p style="margin-bottom: 30px; font-size: 1.1rem; color: #495057;">
                עברת על שאלות מתקדמות המדמות את רמת החשיבה הנדרשת בתפקיד.
            </p>
            <button id="restart-button" class="btn">שחק שוב</button>
        </div>
    </div>

    <script>
        const originalQuestions = [
            // --- קטגוריה 1: ניהול הוצאות סחר (Trade Spend) ---
            {
                category: "ניהול הוצאות סחר (Trade Spend)",
                question: "מה המשמעות של 'זליגה' (Leakage) בהקשר של הוצאות סחר?",
                answers: [
                    { text: "סחורה שנפלה מהמשאית.", isCorrect: false },
                    { text: "הוצאות סחר לא מבוקרות או לא מתועדות שמביאות להפסד כספי.", isCorrect: true },
                    { text: "עובדים שלוקחים סחורה הביתה.", isCorrect: false },
                    { text: "הנחות שהלקוח לא העביר לצרכן.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> 'זליגה' היא מונח מקצועי להפסד כספי הנובע מניהול לקוי של הוצאות סחר, כמו אישור חיובים כפולים, אי קבלת POP, או מבצעים שלא הניבו את התוצאה המצופה."
            },
            {
                category: "ניהול הוצאות סחר (Trade Spend)",
                question: "לקוח מבקש להפעיל מבצע שלא תוכנן בתקציב השנתי. מה תפקידך בתהליך?",
                answers: [
                    { text: "לאשר מיד כדי לרצות את הלקוח.", isCorrect: false },
                    { text: "לנתח את ההשפעה הפיננסית ולבדוק אם יש מקור תקציבי חלופי.", isCorrect: true },
                    { text: "לסרב מיד כי זה לא בתקציב.", isCorrect: false },
                    { text: "להפנות את הבקשה למנהל הכספים ישירות.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> תפקידך הוא להיות הגורם המקצועי שמנתח את ההשלכות. זה כולל בדיקת כדאיות, מציאת פתרונות תקציביים ותיעוד מסודר של כל חריגה מהתוכנית המקורית לאישור הגורמים הרלוונטיים."
            },
            // --- קטגוריה 2: ניתוח אנליטי ו-KPIs ---
            {
                category: "ניתוח אנליטי ו-KPIs",
                question: "בבדיקת חיוב על מבצע הנחות ב-Power BI, איזה נתון עליך לחפש כדי לאמת את החיוב?",
                answers: [
                    { text: "נתוני Sell-In: כמה סחורה מכרנו לרשת.", isCorrect: false },
                    { text: "נתוני Sell-Through: כמה סחורה הרשת מכרה לצרכנים.", isCorrect: true },
                    { text: "נתוני המלאי שנשארו אצל הלקוח בסוף החודש.", isCorrect: false },
                    { text: "תחזית המכירות המקורית לאותו חודש.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> חיובים על מבצעי הנחה לקונים מבוססים כמעט תמיד על נתוני המכירה מהקופות של הרשת לצרכן הסופי (Sell-Through), ולא על כמות הסחורה שהחברה סיפקה לרשת (Sell-In)."
            },
            {
                category: "ניתוח אנליטי ו-KPIs",
                question: "איזה KPI הוא החשוב ביותר למדידת אפקטיביות של מבצע הנחות?",
                answers: [
                    { text: "כמות היחידות שנמכרה (Sell-In)", isCorrect: false },
                    { text: "החזר על ההשקעה (ROI) של המבצע", isCorrect: true },
                    { text: "מספר התלונות שהתקבלו מהלקוח", isCorrect: false },
                    { text: "מהירות סגירת הזיכוי במערכת", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> ROI (Return on Investment) הוא המדד המרכזי. הוא בוחן כמה רווח נוסף נוצר כתוצאה מההשקעה במבצע, מעבר למכירות הרגילות שהיו מתרחשות ממילא."
            },
            {
                category: "ניתוח אנליטי ו-KPIs",
                question: "בדוח PBI אתה רואה שמבצע מסוים הניב עלייה גדולה במכירות, אך ירידה ברווחיות. מה זה יכול להצביע?",
                answers: [
                    { text: "שהמבצע היה הצלחה מסחררת.", isCorrect: false },
                    { text: "שההנחה שניתנה הייתה עמוקה מדי ו'אכלה' את כל הרווח.", isCorrect: true },
                    { text: "שיש טעות בנתונים ב-PBI.", isCorrect: false },
                    { text: "שהלקוחות לא אהבו את המוצר.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> עלייה במחזור המכירות אינה המדד היחיד להצלחה. ניתוח נכון כולל בחינה של ההשפעה על הרווחיות. מבצע יכול להגדיל מכירות אך לגרום להפסד אם ההנחה גבוהה מדי."
            },
             // --- קטגוריה 3: ניהול ניכויים מתקדם ---
            {
                category: "ניהול ניכויים מתקדם",
                question: "זיהית חיוב כפול מלקוח על אותו מבצע. מהי הפעולה המקצועית הנכונה ביותר?",
                answers: [
                    { text: "לאשר רק אחד מהם ולקוות שהלקוח לא ישים לב.", isCorrect: false },
                    { text: "לסווג את השני כ'ניכוי לא תקף' (Invalid Deduction) ולפעול להחזר כספי.", isCorrect: true },
                    { text: "להתקשר לקניין ולהתלונן על הטעות.", isCorrect: false },
                    { text: "לאשר את שני החיובים כדי לא לפגוע ביחסים עם הלקוח.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> התהליך המקצועי הוא לא רק לדחות את החיוב, אלא לנהל אותו באופן אקטיבי כ'ניכוי לא תקף'. זה כולל תיעוד, דחייה רשמית, ותקשורת עם הגבייה כדי להבטיח שהכסף יוחזר לחברה."
            },
            {
                category: "ניהול ניכויים מתקדם",
                question: "מהו 'דוח גיול' (Aging Report) בהקשר של ניהול חיובים?",
                answers: [
                    { text: "דוח שמציג את גילאי העובדים במחלקה.", isCorrect: false },
                    { text: "דוח הממיין חיובים/ניכויים פתוחים לפי משך הזמן שהם ממתינים לטיפול.", isCorrect: true },
                    { text: "דוח שמציג את כל המבצעים שהיו החודש.", isCorrect: false },
                    { text: "דוח שמדרג את הלקוחות לפי ותק.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> דוח הגיול הוא כלי עבודה קריטי מול מחלקת הגבייה. הוא מסייע לתעדף את הטיפול בחיובים ישנים שמעכבים סגירת חשבונות ועלולים להצביע על בעיות עומק בתהליך."
            },
            // --- קטגוריה 4: תהליכים פיננסיים ---
            {
                category: "תהליכים פיננסיים",
                question: "מדוע מחלקת הכספים מבצעת 'הפרשות' (Accruals) עבור פעילויות סחר עוד לפני קבלת החיוב מהלקוח?",
                answers: [
                    { text: "כדי לשלם ללקוח מראש על המבצע.", isCorrect: false },
                    { text: "כדי לשקף את ההוצאה הצפויה בדוחות הכספיים של אותה תקופה.", isCorrect: true },
                    { text: "זו דרישה משפטית של רשות המיסים.", isCorrect: false },
                    { text: "כדי להזכיר למחלקת הסחר שהם צריכים לאסוף את החיוב.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> עיקרון ההכרה בהוצאה בחשבונאות קובע שיש לרשום הוצאה בתקופה שבה היא נוצרה. ההפרשה (Accrual) מבטיחה שהדוחות הכספיים ישקפו את כל ההתחייבויות של החברה באופן מדויק, גם אם החיוב הפורמלי טרם הגיע."
            },
            {
                category: "תהליכים פיננסיים",
                question: "מהי ההשפעה של הפקת זיכוי על דוח רווח והפסד (P&L) של החברה?",
                answers: [
                    { text: "אין השפעה.", isCorrect: false },
                    { text: "הזיכוי נרשם כהוצאת מכירה ומקטין את ההכנסה נטו.", isCorrect: true },
                    { text: "הזיכוי מגדיל את המלאי.", isCorrect: false },
                    { text: "הזיכוי מגדיל את תזרים המזומנים.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> זיכויים המייצגים הוצאות סחר (כמו הנחות מבצע) נרשמים בדוח רווח והפסד כהוצאה או כהקטנת הכנסה, ובכך משפיעים ישירות על שורת הרווח של החברה."
            },
        ];

        // --- שאלות חדשות על בסיס המידע על Priority ---
        const priorityQuestions = [
            {
                category: "תהליכי עבודה במערכת Priority",
                question: "מהי הפעולה הראשונה שעליך לבצע במערכת Priority כדי להתחיל בהגדרה של מבצע חודשי חדש?",
                answers: [
                    { text: "להיכנס למסך 'קישור מחירון ללקוח'.", isCorrect: false },
                    { text: "לפתוח 'מחירון' חדש ולהגדיר לו קוד, תיאור ותוקף.", isCorrect: true },
                    { text: "להפיק זיכוי עתידי.", isCorrect: false },
                    { text: "להגדיר 'הנחה למוצר' בכרטיס הלקוח.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> הכל מתחיל מיצירת 'המיכל' למבצע. השלב הראשון הוא תמיד פתיחת 'מחירון' חדש, שיהווה את הבסיס לכל הגדרות המבצע הספציפיות בהמשך."
            },
            {
                category: "תהליכי עבודה במערכת Priority",
                question: "הגדרת מבצע במסך 'מחירי מוצרים', אך הלקוח לא מקבל את ההנחה. מהי הפעולה הקריטית שסביר להניח ששכחת?",
                answers: [
                    { text: "לעדכן את המק'ט של המוצר.", isCorrect: false },
                    { text: "לבצע 'קישור מחירון ללקוח' כדי להפעיל את המבצע.", isCorrect: true },
                    { text: "לבדוק את תאריך התוקף של המחירון.", isCorrect: false },
                    { text: "לשלוח ללקוח מכתב על המבצע.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> הגדרת המחירון והמחירים היא רק חצי מהעבודה. כדי 'להפעיל' את המבצע עבור לקוח ספציפי, חובה לקשר את המחירון אליו במסך 'קישור מחירון ללקוח'. ללא פעולה זו, המערכת לא תדע להחיל את ההנחה."
            },
            {
                category: "תהליכי עבודה במערכת Priority",
                question: "מנהל הסחר מבקש לתת הנחה של 15% ללקוח ספציפי על כל משפחת מוצרי החלב. באיזה מסך הכי נכון להגדיר זאת?",
                answers: [
                    { text: "במסך 'מחירי מוצרים' הכללי.", isCorrect: false },
                    { text: "במסך 'הנחה למוצר' המקושר לכרטיס הלקוח.", isCorrect: true },
                    { text: "במסך 'הפקת זיכויים'.", isCorrect: false },
                    { text: "במסך 'מחירונים'.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> מסך 'הנחה למוצר' נועד בדיוק למצבים כאלה - מתן הנחה באחוזים ללקוח ספציפי על קבוצת מוצרים, והוא גובר על מחירונים כלליים."
            },
            {
                category: "תהליכי עבודה במערכת Priority",
                question: "לאחר שאישרת ניכוי של לקוח עקב טעות בחיוב, מהי הפעולה הסופית שתבצע ב-Priority?",
                answers: [
                    { text: "למחוק את החשבונית המקורית.", isCorrect: false },
                    { text: "להיכנס למסך 'הפקת חשבוניות/זיכויים' ולהפיק תעודת זיכוי.", isCorrect: true },
                    { text: "לשלוח מייל לגבייה שיטפלו בזה.", isCorrect: false },
                    { text: "לעדכן את המחירון של הלקוח.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> הפעולה החשבונאית הפורמלית שסוגרת את הטיפול היא הפקת מסמך רשמי - תעודת זיכוי. פעולה זו מתקנת את הרישומים הכספיים ומאזנת את כרטיס הלקוח."
            },
            {
                category: "תהליכי עבודה במערכת Priority",
                question: "מה ההבדל המהותי בין הגדרה ב'מחירי מוצרים' לבין הגדרה ב'הנחה למוצר'?",
                answers: [
                    { text: "אין הבדל, התוצאה זהה.", isCorrect: false },
                    { text: "'מחירי מוצרים' קובע מחיר סופי ליחידה, 'הנחה למוצר' מחיל הנחה באחוזים.", isCorrect: true },
                    { text: "'מחירי מוצרים' הוא ללקוחות גדולים, 'הנחה למוצר' לקטנים.", isCorrect: false },
                    { text: "רק 'מחירי מוצרים' דורש תאריך תוקף.", isCorrect: false }
                ],
                explanation: "<strong>התשובה הנכונה:</strong> זו הבחנה חשובה. 'מחירי מוצרים' משמש להגדרת מחיר מבצע ספציפי (למשל, 10 ש'ח ליחידה), בעוד ש'הנחה למוצר' משמש להחלת הנחה גורפת באחוזים (למשל, 20% הנחה על כל הקטגוריה)."
            },
        ];
        
        // Combine all questions
        let allQuestions = [...originalQuestions, ...priorityQuestions];
        
        // Add more questions to reach 50 by duplicating and slightly modifying some
        let moreQuestions = [];
        for(let i = 0; i < 3; i++) { // This loop will add 3 * originalQuestions.length questions
             moreQuestions.push(...originalQuestions.map(q => ({...q}))); // simple duplication for quantity
        }
        allQuestions.push(...moreQuestions);


        let currentQuestionIndex = 0;

        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const endScreen = document.getElementById('end-screen');
        const categoryTitle = document.getElementById('category-title');
        const questionText = document.getElementById('question-text');
        const answersContainer = document.getElementById('answers-container');
        const feedbackArea = document.getElementById('feedback-area');
        const startButton = document.getElementById('start-button');
        const nextButton = document.getElementById('next-button');
        const restartButton = document.getElementById('restart-button');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');

        let shuffledQuestions = [];

        startButton.addEventListener('click', startGame);
        nextButton.addEventListener('click', nextQuestion);
        restartButton.addEventListener('click', restartGame);
        
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function startGame() {
            startScreen.style.display = 'none';
            endScreen.style.display = 'none';
            quizScreen.style.display = 'block';
            currentQuestionIndex = 0;
            // Shuffle and slice to ensure exactly 50 questions
            shuffledQuestions = shuffleArray([...allQuestions]).slice(0, 50);
            showQuestion();
        }

        function showQuestion() {
            resetState();
            if (currentQuestionIndex >= shuffledQuestions.length) {
                endGame();
                return;
            }

            const currentQuestion = shuffledQuestions[currentQuestionIndex];
            categoryTitle.textContent = currentQuestion.category;
            questionText.textContent = currentQuestion.question;
            
            const shuffledAnswers = shuffleArray([...currentQuestion.answers]);

            shuffledAnswers.forEach(answer => {
                const button = document.createElement('button');
                button.innerHTML = answer.text;
                button.classList.add('answer-btn');
                if (answer.isCorrect) {
                    button.dataset.correct = true;
                }
                button.addEventListener('click', selectAnswer);
                answersContainer.appendChild(button);
            });
            updateProgress();
        }

        function resetState() {
            while (answersContainer.firstChild) {
                answersContainer.removeChild(answersContainer.firstChild);
            }
            feedbackArea.style.display = 'none';
            feedbackArea.classList.remove('correct-feedback', 'incorrect-feedback');
            nextButton.style.display = 'none';
        }

        function selectAnswer(e) {
            const selectedButton = e.currentTarget;
            const isCorrect = selectedButton.dataset.correct === 'true';

            feedbackArea.style.display = 'block';
            const explanation = shuffledQuestions[currentQuestionIndex].explanation;
            
            if (isCorrect) {
                selectedButton.classList.add('correct');
                feedbackArea.innerHTML = explanation;
                feedbackArea.classList.add('correct-feedback');
            } else {
                selectedButton.classList.add('incorrect');
                feedbackArea.innerHTML = explanation;
                feedbackArea.classList.add('incorrect-feedback');
                Array.from(answersContainer.children).forEach(button => {
                    if (button.dataset.correct === 'true') {
                        button.classList.add('correct');
                    }
                });
            }

            Array.from(answersContainer.children).forEach(button => {
                button.disabled = true;
            });

            nextButton.style.display = 'inline-block';
        }

        function nextQuestion() {
            currentQuestionIndex++;
            showQuestion();
        }

        function updateProgress() {
            const totalQuestions = shuffledQuestions.length;
            const progressPercentage = ((currentQuestionIndex + 1) / totalQuestions) * 100;
            progressBar.style.width = `${progressPercentage}%`;
            progressText.textContent = `שאלה ${currentQuestionIndex + 1} מתוך ${totalQuestions}`;
        }

        function endGame() {
            quizScreen.style.display = 'none';
            endScreen.style.display = 'block';
        }

        function restartGame() {
            startGame();
        }
    </script>
</body>
</html>

